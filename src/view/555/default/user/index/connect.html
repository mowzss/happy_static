{extend name="../common/layout" /} {block name="content"}<div class="layui-card box-shadow radius"><div class="layui-card-header"> <span>安全设置</span></div><div class="layui-card-body"><fieldset class="layui-elem-field"><legend>第三方账号</legend><div class="layui-field-box"><ul class="connect-list"><li><div class="connect-list-bind"><i class="layui-icon layui-icon-login-qq" style='color: #3399ff'></i> QQ账号</div><div class="connect-list-info"> {notempty name="$user_bind['qq']"} <span class="layui-badge layui-bg-green">已绑定</span> <a href="javascript:" data-action="{:url('bind/delBind')}" data-value="type#qq" data-confirm="确定要解除QQ账号绑定？">解绑</a> {else/} <span class="layui-badge">未绑定</span> <a href="javascript:" onclick="toQzoneLogin()">绑定</a> {/notempty}</div></li></ul></div></fieldset><fieldset class="layui-elem-field" style="margin-top: 20px"><legend>安全账号</legend><div class="layui-field-box"><ul class="connect-list"><li><div class="connect-list-bind"> <i class="layui-icon" style="color: #ba0ee1">&#xe678;</i>手机号</div><div class="connect-list-info"> {notempty name="$userdb['mobile']"} {notempty name="$userdb['mobile_status']"} <span class="layui-badge layui-bg-green">已绑定</span> <span>{:hide_info($userdb['mobile'])}</span> <a href="javascript:" data-modal="{:url('bind/mobile')}">更改</a> {else/} <span class="layui-badge layui-bg-blue">未认证</span> <span>{:hide_info($userdb['mobile'])}</span> <a href="javascript:" data-modal="{:url('bind/mobile')}">认证</a> {/notempty} {else/} <span class="layui-badge">未绑定</span> <a href="javascript:" data-modal="{:url('bind/mobile')}">绑定</a> {/notempty}</div></li><li><div class="connect-list-bind"> <i class="layui-icon" style="color: #e0490d">&#xe618;</i>邮箱</div><div class="connect-list-info"> {notempty name="$userdb['usermail']"} {notempty name="$userdb['usermail_status']"} <span class="layui-badge layui-bg-green">已绑定</span> <span>{:hide_info($userdb['usermail'])}</span> <a href="javascript:" data-modal="{:url('bind/email')}">更改</a> {else/} <span class="layui-badge layui-bg-blue">未认证</span> <span>{:hide_info($userdb['usermail'])}</span> <a href="javascript:" data-modal="{:url('bind/email')}">认证</a> {/notempty} {else/} <span class="layui-badge">未绑定</span> <a href="javascript:" data-modal="{:url('bind/email')}">绑定</a> {/notempty}</div></li></ul></div></fieldset></div></div> {/block} {block name="footer_js"}<script type="text/javascript">
    function toQzoneLogin() {
        var winObj = window.open("{:url(\"user/oauth/login\",[\"type\"=>\"qq\"])}", '_blank', 'height=420,width=600,top=160,left=200,menubar=0,scrollbars=1,resizable=1,status=1,titlebar=0,toolbar=0,location=1');
        var loop = setInterval(function () {
            if (winObj.closed) {
                clearInterval(loop);
                parent.location.reload();
            }
        }, 1);
    }
</script> {/block}