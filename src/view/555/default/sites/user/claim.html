{extend name="../common/layout" /}
{block name="head_css"}
<style>
    .layui-form {
        margin: 40px 0;
    }
</style>
{/block}
{block name="content"}
<div class="layui-card">
    <div class="layui-card-header">认领网站</div>
    <div class="layui-card-body">
        <div class="layui-tab layui-tab-brief">
            <div class="layui-tab-content">
                <form action="{:sysuri()}" autocomplete="off" class="layui-form layui-form-pane form-search"
                      method="get"
                      onsubmit="return false">
                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input autocomplete="off" class="layui-input" lay-verify="required" name="domain"
                                   placeholder="输入您要认领网站的域名" type="text" value="{$get.domain|default=''}">
                        </div>
                        <div class="layui-form-mid" style="padding: 0!important;">
                            <button class="layui-btn layui-btn-primary" type="button"><i class="layui-icon">&#xe615;</i>搜一下
                            </button>
                        </div>
                        <div class="layui-form-mid layui-word-aux">*无需输入"http://"或"https://"</div>
                    </div>
                </form>
                <table data-target-search="form.form-search" data-url="{:url()}" id="myTable"></table>
            </div>
        </div>

    </div>
</div>
{/block}
{block name="footer_js"}
<script id="toptoolbar" type="text/html">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" data-open="{:url('add')}" type="button">添加网站</button>
    </div>
</script>
<script>
    $(function () {
        // 初始化表格组件
        $('#myTable').layTable({
            even: true, height: 'full', skin: 'nob', toolbar: '#toptoolbar', url: '{:url()}',
            sort: {field: 'id', type: 'desc'}, where: {type: '{$type|default="index"}'},
            cols: [[
                {field: 'title', title: '网站名称', align: 'left',},
                {field: 'site_url', title: '网址', align: 'left', templet: '#urlTempler'},
                {field: 'create_time', title: '添加时间', align: 'center', width: 110, templet: '#timeTempler'},
                {field: 'status', title: '审核状态', align: 'center', width: 100, templet: '#statusTempler'},
                {field: 'attestation', title: '认证状态', align: 'center', width: 160, templet: '#attestationTempler'},
            ]]
        });
    });

</script>
<!-- 数据操作工具条模板 -->
<script id="urlTempler" type="text/html">
    <a href="{{d.url}}" target="_blank" title="{{d.title}}">{{d.site_url}}</a>
</script>
<script id="statusTempler" type="text/html">
    {{#  if(d.status){ }}
    <b class="layui-font-green">√正常</b>
    {{#  } else { }}
    <b class="layui-font-red">×待审</b>
    {{#  } }}
</script>
<script id="attestationTempler" type="text/html">
    {{#  if(d.attestation){ }}
    <b class="layui-font-green">√已认证</b>
    {{#  } else { }}
    <b class="layui-font-red">×未认证</b>
    <a data-open="{:url('certifying')}?id={{d.id}}" class="layui-btn layui-btn-xs layui-bg-blue">认证网站</a>
    {{#  } }}
</script>
<script id="timeTempler" type="text/html">
    {{d._time}}
</script>
{/block}
