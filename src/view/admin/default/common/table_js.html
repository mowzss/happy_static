<script>
    layui.use(['laytable'], function () {
        let laytable = layui.laytable, order = JSON.parse('{$default_order|default=["id"=>"desc"]|raw|json_encode}'),
            opt = {
                elem: '#{:get_lay_table_id()}',
                headers: {out: 'json'},
                cols: [JSON.parse('{$tables.fields|raw|json_encode}')],
                toolbar: "#{:get_lay_table_id()}-toolbarTop",
                page: true,
                dataUrls: {
                    add: "{:url('add')}",
                    edit: "{:url('edit')}",
                    del: "{:url('delete')}",
                    quick: "{:url('quickEdit')}",
                },
                isTree: JSON.parse('{$is_tree|default=false|json_encode}'),
                toolTplData: JSON.parse('{$tables.right_button|default=[]|raw|json_encode}')
            }
        // 获取 order 对象的所有键
        Object.keys(order).forEach(key => {
            if (order[key]) {
                opt.where = {
                    _order: key,
                    _by: order[key]
                }

            }
        });
        if (opt.isTree) {
            opt.tree = {
                customName: {
                    name: 'title',
                    pid: 'pid'
                }
            }
        }
        // 渲染表格
        laytable.render(opt);
    });


</script>
