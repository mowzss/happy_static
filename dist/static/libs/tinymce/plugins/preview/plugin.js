(()=>{var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=t=>e=>e.options.get(t);let m=t("content_style"),y=t("content_css_cors"),v=t("body_class"),p=t("body_id"),n=t=>{let e,n="",o=t.dom.encode;var i=null!=(e=m(t))?e:"";n+='<base href="'+o(t.documentBaseURI.getURI())+'">';let r=y(t)?' crossorigin="anonymous"':"";d.each(t.contentCSS,e=>{n+='<link type="text/css" rel="stylesheet" href="'+o(t.documentBaseURI.toAbsolute(e))+'"'+r+">"}),i&&(n+='<style type="text/css">'+i+"</style>");var i=p(t),s=v(t),a='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(c.os.isMacOS()||c.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",l=t.getBody().dir,l=l?' dir="'+o(l)+'"':"";return"<!DOCTYPE html><html><head>"+n+'</head><body id="'+o(i)+'" class="mce-content-body '+o(s)+'"'+l+">"+t.getContent()+a+"</body></html>"},i=e=>{var t=n(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}}).focus("close")};e.add("preview",e=>{var t,n,o;(t=e).addCommand("mcePreview",()=>{i(t)}),o=()=>n.execCommand("mcePreview"),(n=e).ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:o,context:"any"}),n.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:o,context:"any"})})})();