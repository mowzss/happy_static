(()=>{let u=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var H=tinymce.util.Tools.resolve("tinymce.PluginManager");let V=e=>({isFullscreen:()=>null!==e.get()}),W=(e,t,r)=>!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name;var e=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&W(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t},t=t=>e=>typeof e===t,r=t=>e=>t===e;let n=e("string"),q=e("object"),B=e("array"),l=r(null),j=t("boolean"),I=r(void 0),_=e=>null==e,o=e=>!_(e),s=t("function"),z=t("number"),a=()=>{},K=(t,r)=>(...e)=>t(r.apply(null,e)),$=(t,r)=>e=>t(r(e)),h=e=>()=>e,m=h(!1);e=h(!0);class g{constructor(e,t){this.tag=e,this.value=t}static some(e){return new g(!0,e)}static none(){return g.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?g.some(e(this.value)):g.none()}bind(e){return this.tag?e(this.value):g.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:g.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return o(e)?g.some(e):g.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}g.singletonNone=new g(!1);let U=Array.prototype.push,i=(t,r)=>{var n=t.length,o=new Array(n);for(let e=0;e<n;e++){var i=t[e];o[e]=r(i,e)}return o},d=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},c=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];n(i,e)&&o.push(i)}return o},X=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var i=r[e];if(n(i,e))return g.some(i);if(o(i,e))break}return g.none()},f=(e,t)=>X(e,t,m),Y=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!B(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);U.apply(n,r[e])}return n},G=(e,t)=>Y(i(e,t)),J=(e,t)=>0<=t&&t<e.length?g.some(e[t]):g.none(),Q=e=>J(e,0),Z=(t,r)=>{for(let e=0;e<t.length;e++){var n=r(t[e],e);if(n.isSome())return n}return g.none()},ee=(e,t,r)=>e.isSome()&&t.isSome()?g.some(r(e.getOrDie(),t.getOrDie())):g.none(),v=e=>{let t=u(g.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(g.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(g.some(e))}}},p=()=>v(e=>e.unbind()),te=Object.keys,re=(r,n)=>{var o=te(r);for(let e=0,t=o.length;e<t;e++){var i=o[e];n(r[i],i)}},ne="undefined"!=typeof window?window:Function("return this;")(),oe=(t,e)=>{let r=null!=e?e:ne;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},w=(e,t)=>{e=e.split(".");return oe(e,t)},ie=(e,t)=>w(e,t),le=(e,t)=>{t=ie(e,t);if(null==t)throw new Error(e+" not available on this browser");return t},se=Object.getPrototypeOf,ae=e=>le("HTMLElement",e),ue=e=>{var t=w("ownerDocument.defaultView",e);return q(e)&&(ae(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(se(e).constructor.name))},me=9,y=11,b=1,de=e=>S(e)&&ue(e.dom),S=(r=t=>e=>e.dom.nodeType===t)(b),ce=r(3),he=r(y),fe=(e,t,r)=>{if(!(n(r)||j(r)||z(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},ge=(e,t,r)=>{fe(e.dom,t,r)},x=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},E=(e,t)=>{e.dom.removeAttribute(t)},ve=e=>void 0!==e.dom.classList,pe=(e,t)=>ve(e)&&e.dom.classList.contains(t),F=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!I(n)||e+t.length<=n)},we=e=>void 0!==e.style&&s(e.style.getPropertyValue),T=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},k={fromHtml:(e,t)=>{var r,t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw r="HTML does not have a single root node",console.error(r,e),new Error(r);return T(t.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return T(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return T(t)},fromDom:T,fromPoint:(e,t,r)=>g.from(e.dom.elementFromPoint(t,r)).map(T)},ye=(e,t)=>{e=e.dom;if(e.nodeType!==b)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},be=e=>e.nodeType!==b&&e.nodeType!==me&&e.nodeType!==y||0===e.childElementCount,Se=(e,t)=>{t=void 0===t?document:t.dom;return be(t)?[]:i(t.querySelectorAll(e),k.fromDom)},xe=(e,t)=>e.dom===t.dom,O=e=>k.fromDom(e.dom.ownerDocument),Ee=e=>g.from(e.dom.parentNode).map(k.fromDom),Fe=(e,t)=>{var r=s(t)?t:m;let n=e.dom;for(var o=[];null!=n.parentNode;){var i=n.parentNode,l=k.fromDom(i);if(o.push(l),!0===r(l))break;n=i}return o},Te=t=>Ee(t).map(Oe).map(e=>c(e,e=>!xe(t,e))).getOr([]),ke=e=>g.from(e.dom.nextSibling).map(k.fromDom),Oe=e=>i(e.dom.childNodes,k.fromDom),Ce=e=>he(e)&&o(e.dom.host),De=e=>k.fromDom(e.dom.getRootNode()),C=e=>{e=De(e);return Ce(e)?g.some(e):g.none()},D=e=>k.fromDom(e.dom.host),Ae=e=>{if(o(e.target)){var t=k.fromDom(e.target);if(S(t)&&Le(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Q(t)}}return g.from(e.target)},Le=e=>o(e.dom.shadowRoot),Re=e=>{let t=ce(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return C(k.fromDom(t)).fold(()=>r.body.contains(t),$(Re,D))},Me=e=>{e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return k.fromDom(e)},Pe=(e,t,r)=>{if(!n(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);we(e)&&e.style.setProperty(t,r)},Ne=(e,t,r)=>{e=e.dom;Pe(e,t,r)},A=(e,t)=>{let r=e.dom;re(t,(e,t)=>{Pe(r,t,e)})},He=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Re(e)?n:Ve(r,t)},Ve=(e,t)=>we(e)?e.style.getPropertyValue(t):"",We=(e,t,r,n,o,i,l)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:i,raw:l}),qe=e=>{var t=k.fromDom(Ae(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=K(n,r);return We(t,e.clientX,e.clientY,r,n,o,e)},Be=(t,r)=>e=>{t(e)&&r(qe(e))},je=(e,t,r,n,o)=>{var i,l,r=Be(r,n);return e.dom.addEventListener(t,r,o),{unbind:(i=_e,l=[e,t,r,o],(...e)=>{e=l.concat(e);return i.apply(null,e)})}},Ie=(e,t,r,n)=>je(e,t,r,n,!1),_e=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},ze=e,Ke=(e,t,r)=>Ie(e,t,ze,r),$e=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}},Ue=()=>L(0,0),L=(e,t)=>({major:e,minor:t}),R={nu:L,detect:(e,t)=>{t=String(t).toLowerCase();return 0===e.length?Ue():((e,t)=>{let r=$e(e,t);return r?(e=e=>Number(t.replace(r,"$"+e)),L(e(1),e(2))):{major:0,minor:0}})(e,t)},unknown:Ue},Xe=(e,t)=>{let r=String(t).toLowerCase();return f(e,e=>e.search(r))},Ye=(e=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>F(e,"edge/")&&F(e,"chrome")&&F(e,"safari")&&F(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,t=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:e=>F(e,"chrome")&&!F(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>F(e,"msie")||F(e,"trident")},{name:"Opera",versionRegexes:[t,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(r=t=>e=>F(e,t))("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[t,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(F(e,"safari")||F(e,"mobile/"))&&F(e,"applewebkit")}],t=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>F(e,"iphone")||F(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:r("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:r("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],{browsers:h(e),oses:h(t)}),Ge="Edge",Je="Chromium",Qe="IE",Ze="Opera",et="Firefox",tt="Safari",rt=e=>{let t=e.current;var r=e=>()=>t===e;return{current:t,version:e.version,isEdge:r(Ge),isChromium:r(Je),isIE:r(Qe),isOpera:r(Ze),isFirefox:r(et),isSafari:r(tt)}},nt={unknown:()=>rt({current:void 0,version:R.unknown()}),nu:rt,edge:h(Ge),chromium:h(Je),ie:h(Qe),opera:h(Ze),firefox:h(et),safari:h(tt)},ot="Windows",it="iOS",lt="Android",st="Linux",at="macOS",ut="Solaris",mt="FreeBSD",dt="ChromeOS",ct=e=>{let t=e.current;var r=e=>()=>t===e;return{current:t,version:e.version,isWindows:r(ot),isiOS:r(it),isAndroid:r(lt),isMacOS:r(at),isLinux:r(st),isSolaris:r(ut),isFreeBSD:r(mt),isChromeOS:r(dt)}},ht={unknown:()=>ct({current:void 0,version:R.unknown()}),nu:ct,windows:h(ot),ios:h(it),android:h(lt),linux:h(st),macos:h(at),solaris:h(ut),freebsd:h(mt),chromeos:h(dt)},ft={detect:(t,e,r)=>{let o=Ye.browsers();var n,i,l,s,a,u,m,d=Ye.oses(),e=e.bind(e=>{return n=o,e=e,Z(e.brands,t=>{let r=t.brand.toLowerCase();return f(n,e=>r===(null==(e=e.brand)?void 0:e.toLowerCase())).map(e=>({current:e.name,version:R.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=o,r=t,Xe(e,r).map(e=>{var t=R.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(nt.unknown,nt.nu),d=(d=d,n=t,Xe(d,n).map(e=>{var t=R.detect(e.versionRegexes,n);return{current:e.name,version:t}}).fold(ht.unknown,ht.nu)),c=(l=e,s=t,r=r,c=(i=d).isiOS()&&!0===/ipad/i.test(s),a=i.isiOS()&&!c,u=i.isiOS()||i.isAndroid(),m=u||r("(pointer:coarse)"),r=c||!a&&u&&r("(min-device-width:768px)"),u=a||u&&!r,l=l.isSafari()&&i.isiOS()&&!1===/safari/i.test(s),s=!u&&!r&&!l,{isiPad:h(c),isiPhone:h(a),isTablet:h(r),isPhone:h(u),isTouch:h(m),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:h(l),isDesktop:h(s)});return{browser:e,os:d,deviceType:c}}},gt=e=>window.matchMedia(e).matches,vt=(t=>{let r=!1,n;return(...e)=>(r||(r=!0,n=t.apply(null,e)),n)})(()=>ft.detect(window.navigator.userAgent,g.from(window.navigator.userAgentData),gt)),pt=(r,n)=>({left:r,top:n,translate:(e,t)=>pt(r+e,n+t)}),wt=pt,yt=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return wt(t,e)},M=e=>{e=void 0===e?window:e;return vt().browser.isFirefox()?g.none():g.from(e.visualViewport)},bt=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),St=e=>{let r=void 0===e?window:e;e=r.document;let n=yt(k.fromDom(e));return M(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return bt(n.left,n.top,t,e)},e=>bt(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},xt=(r,n,e)=>M(e).map(e=>{let t=e=>n(qe(e));return e.addEventListener(r,t),{unbind:()=>e.removeEventListener(r,t)}}).getOrThunk(()=>({unbind:a})),Et=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var Ft,Tt=tinymce.util.Tools.resolve("tinymce.Env");let kt=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},P=(Ft="fullscreen_native",e=>e.options.get(Ft)),Ot=e=>{let t=k.fromDom(e.getElement());return C(t).map(D).getOrThunk(()=>Me(O(t)))},Ct=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,Dt=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",At=e=>{e=e.dom;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},Lt=e=>{e=e.dom;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},Rt=e=>e.dom===Ct(O(e).dom),Mt=(e,t,r)=>c(Fe(e,r),t),Pt=(e,t)=>c(Te(e),t),Nt=e=>Se(e),Ht=(e,t,r)=>Mt(e,e=>ye(e,t),r),Vt=(e,t)=>Pt(e,e=>ye(e,t)),N="data-ephox-mobile-fullscreen-style",Wt="display:none!important;",qt="position:absolute!important;",Bt="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",jt="background-color:rgb(255,255,255)!important;",It=Tt.os.isAndroid(),_t=e=>{e=He(e,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":jt},zt=(n,e,t)=>{var r=r=>e=>{var t=x(e,"style"),t=void 0===t?"no-styles":t.trim();t!==r&&(ge(e,N,t),A(e,n.parseStyle(r)))},o=Ht(e,"*"),i=G(o,e=>Vt(e,"*:not(.tox-silver-sink)")),t=_t(t),i=(d(i,r(Wt)),d(o,r(qt+Bt+t)),!0===It?"":qt);r(i+Bt+t)(e)},Kt=r=>{var e=Nt("["+N+"]");d(e,e=>{var t=x(e,N);t&&"no-styles"!==t?A(e,r.parseStyle(t)):E(e,"style"),E(e,N)})},$t=Et.DOM,Ut=()=>St(window),Xt=e=>window.scrollTo(e.x,e.y),Yt=M().fold(()=>({bind:a,unbind:a}),t=>{let r=(()=>{let t=v(a);return{...t,on:e=>t.get().each(e)}})(),n=p(),o=p(),i=((t,r)=>{let n=null;return{cancel:()=>{l(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{l(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}})(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{r.on(e=>A(e,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"}))})},50);return{bind:e=>{r.set(e),i.throttle(),n.set(xt("resize",i.throttle)),o.set(xt("scroll",i.throttle))},unbind:()=>{r.on(()=>{n.clear(),o.clear()}),r.clear()}}}),Gt=(t,r)=>{let e=document.body,n=document.documentElement,o=t.getContainer(),i=k.fromDom(o);var l=ke(i).filter(e=>de(e)&&pe(e,"tox-silver-sink"));let s=Ot(t);var a=r.get(),u=k.fromDom(t.getBody());let m=Tt.deviceType.isTouch();var d=o.style,c=t.iframeElement,c=null==c?void 0:c.style;let h=t=>{t(e,"tox-fullscreen"),t(n,"tox-fullscreen"),t(o,"tox-fullscreen"),C(i).map(e=>D(e).dom).each(e=>{t(e,"tox-fullscreen"),t(e,"tox-shadowhost")})};var f=()=>{m&&Kt(t.dom),h($t.removeClass),Yt.unbind(),g.from(r.get()).each(e=>e.fullscreenChangeHandler.unbind())};a?(a.fullscreenChangeHandler.unbind(),P(t)&&Rt(s)&&Lt(O(s)),c.width=a.iframeWidth,c.height=a.iframeHeight,d.width=a.containerWidth,d.height=a.containerHeight,d.top=a.containerTop,d.left=a.containerLeft,ee(l,a.sinkCssPosition,(e,t)=>{Ne(e,"position",t)}),f(),Xt(a.scrollPos),r.set(null),kt(t,!1),t.off("remove",f)):(a=Ke(O(s),Dt(),e=>{!P(t)||Rt(s)||null===r.get()||Gt(t,r)}),a={scrollPos:Ut(),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:c.width,iframeHeight:c.height,fullscreenChangeHandler:a,sinkCssPosition:l.map(e=>He(e,"position"))},m&&zt(t.dom,i,u),c.width=c.height="100%",d.width=d.height="",h($t.addClass),l.each(e=>{Ne(e,"position","fixed")}),Yt.bind(i),t.on("remove",f),r.set(a),P(t)&&At(s),kt(t,!0))};var Jt=tinymce.util.Tools.resolve("tinymce.util.VK");let Qt=(r,n)=>t=>{t.setActive(null!==n.get());let e=e=>t.setActive(e.state);return r.on("FullscreenStateChanged",e),()=>r.off("FullscreenStateChanged",e)};H.add("fullscreen",e=>{var t,r,n,o,i,l,s,a=u(null);return e.inline||((0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1}),r=a,(t=e).addCommand("mceFullScreen",()=>{Gt(t,r)}),o=a,i=()=>n.execCommand("mceFullScreen"),(n=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:i,onSetup:Qt(n,o),context:"any"}),n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:i,onSetup:Qt(n,o),shortcut:"Meta+Shift+F",context:"any"}),s=a,(l=e).on("init",()=>{l.on("keydown",e=>{e.keyCode!==Jt.TAB||e.metaKey||e.ctrlKey||!s.get()||e.preventDefault()})}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),V(a)})})();