(()=>{var t,e=tinymce.util.Tools.resolve("tinymce.PluginManager");t=null;let o=e=>t===e,n=e=>e,a=(t,n)=>{var r=t.length,o=new Array(r);for(let e=0;e<r;e++){var a=t[e];o[e]=n(a,e)}return o};var r={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"};let u={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13};var E=[new RegExp(r.aletter),new RegExp(r.midnumlet),new RegExp(r.midletter),new RegExp(r.midnum),new RegExp(r.numeric),new RegExp(r.cr),new RegExp(r.lf),new RegExp(r.newline),new RegExp(r.extend),new RegExp(r.format),new RegExp(r.katakana),new RegExp(r.extendnumlet),new RegExp("@")],r=new RegExp("^"+r.punctuation+"$");let l=E,c=u.OTHER,i=t=>{let n=c;var r=l.length;for(let e=0;e<r;++e){var o=l[e];if(o&&o.test(t)){n=e;break}}return n},T=n=>{let r={};return e=>{var t;return r[e]||(t=n(e),r[e]=t)}},d=e=>{var t=T(i);return a(e,t)},s=(e,t)=>{var n,r=e[t],o=e[t+1];return!(t<0||t>e.length-1&&0!==t)&&(r!==u.ALETTER||o!==u.ALETTER)&&(n=e[t+2],r!==u.ALETTER||o!==u.MIDLETTER&&o!==u.MIDNUMLET&&o!==u.AT||n!==u.ALETTER)&&(e=e[t-1],r!==u.MIDLETTER&&r!==u.MIDNUMLET&&o!==u.AT||o!==u.ALETTER||e!==u.ALETTER)&&(r!==u.NUMERIC&&r!==u.ALETTER||o!==u.NUMERIC&&o!==u.ALETTER)&&(r!==u.MIDNUM&&r!==u.MIDNUMLET||o!==u.NUMERIC||e!==u.NUMERIC)&&(r!==u.NUMERIC||o!==u.MIDNUM&&o!==u.MIDNUMLET||n!==u.NUMERIC)&&(r!==u.EXTEND&&r!==u.FORMAT||o!==u.ALETTER&&o!==u.NUMERIC&&o!==u.KATAKANA&&o!==u.EXTEND&&o!==u.FORMAT)&&(o!==u.EXTEND&&(o!==u.FORMAT||n!==u.ALETTER&&n!==u.NUMERIC&&n!==u.KATAKANA&&n!==u.EXTEND&&n!==u.FORMAT)||r!==u.ALETTER&&r!==u.NUMERIC&&r!==u.KATAKANA&&r!==u.EXTEND&&r!==u.FORMAT)&&!(r===u.CR&&o===u.LF||r!==u.NEWLINE&&r!==u.CR&&r!==u.LF&&o!==u.NEWLINE&&o!==u.CR&&o!==u.LF&&(r===u.KATAKANA&&o===u.KATAKANA||o===u.EXTENDNUMLET&&(r===u.ALETTER||r===u.NUMERIC||r===u.KATAKANA||r===u.EXTENDNUMLET)||r===u.EXTENDNUMLET&&(o===u.ALETTER||o===u.NUMERIC||o===u.KATAKANA)||r===u.AT))},A="",g=/^\s+$/,p=r,R=e=>"http"===e||"https"===e,C=(e,t)=>{let n;for(n=t;n<e.length&&!g.test(e[n]);n++);return n},h=(e,t)=>{var n=C(e,t+1);return"://"===e.slice(t+1,n).join(A).substr(0,3)?n:t},N=(t,n,r,o)=>{var a,u,E,l,c,i=[],T=[];let d=[];for(let e=0;e<r.length;++e)d.push(t[e]),s(r,e)&&(a=n[e],!o.includeWhitespace&&g.test(a)||!o.includePunctuation&&p.test(a)||(a=e-d.length+1,u=e+1,E=n.slice(a,u).join(A),R(E)&&(l=h(n,e),c=t.slice(u,l),Array.prototype.push.apply(d,c),e=l),"."===n[e+1]&&/^([a-zA-Z]\.)+$/.test(E+".")?(d.push(t[e+1]),T.push({start:a,end:u+1})):T.push({start:a,end:u}),i.push(d)),d=[]);return{words:i,indices:T}},m=()=>({includeWhitespace:!1,includePunctuation:!1}),M=(e,t,n)=>{return e=e,t=t,n=n,n={...m(),...n},t=a(e,t),r=d(t),N(e,t,r,n).words;var r},L=e=>e.replace(/\uFEFF/g,"");var y=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");let w=(e,t)=>{let n=t.getBlockElements(),r=t.getVoidElements();var o=[];let a="";for(var u,E=new y(e,e);u=E.next();)3===u.nodeType?a+=L(u.data):(n[(u=u).nodeName]||r[u.nodeName])&&a.length&&(o.push(a),a="");return a.length&&o.push(a),o},U=e=>e.replace(/\u200B/g,""),D=e=>e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,I=(e,t)=>{e=U(w(e,t).join("\n"));return M(e.split(""),n).length},x=(e,t)=>{e=w(e,t).join("");return D(e)},v=(e,t)=>{e=w(e,t).join("").replace(/\s/g,"");return D(e)},W=(e,t)=>()=>t(e.getBody(),e.schema),F=(e,t)=>()=>t(e.selection.getRng().cloneContents(),e.schema),K=e=>W(e,I),b=(e,t)=>{e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},X=(t,n)=>{let r=null;return{cancel:()=>{o(r)||(clearTimeout(r),r=null)},throttle:(...e)=>{o(r)&&(r=setTimeout(()=>{r=null,t.apply(null,e)},n))}}};var f,k=tinymce.util.Tools.resolve("tinymce.util.Delay");let O=(e,t)=>{e.dispatch("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})},S=(e,t)=>{O(e,t)};f=300,e.add("wordcount",e=>{a=e;var t,n,r,o,a={body:{getWordCount:K(a),getCharacterCount:W(a,x),getCharacterCountWithoutSpaces:W(a,v)},selection:{getWordCount:F(a,I),getCharacterCount:F(a,x),getCharacterCountWithoutSpaces:F(a,v)},getCount:K(a)};return n=a,(t=e).addCommand("mceWordCount",()=>b(t,n)),o=()=>r.execCommand("mceWordCount"),(r=e).ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:o,context:"any"}),r.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:o,context:"any"}),((e,t,n)=>{let r=X(()=>S(e,t),n);e.on("init",()=>{S(e,t),k.setEditorTimeout(e,()=>{e.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r.throttle)},0),e.on("remove",r.cancel)})})(e,a,f),a})})();