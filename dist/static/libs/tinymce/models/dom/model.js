(()=>{var l=tinymce.util.Tools.resolve("tinymce.ModelManager");let a=(e,t,r)=>!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name;var e=t=>e=>typeof e===t;let M=(t=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&a(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t})("string"),I=t("object"),P=t("array"),F=(o=t=>e=>t===e)(null),H=e("boolean"),V=o(void 0),q=e=>null==e,$=e=>!q(e),U=e("function"),G=e("number"),O=()=>{},K=(t,r)=>(...e)=>t(r.apply(null,e)),Y=(t,r)=>e=>t(r(e)),g=e=>()=>e,s=e=>e,J=(e,t)=>e===t;function f(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}let Q=t=>e=>!t(e),X=e=>e(),Z=g(!1),k=g(!0);class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return $(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);let ee=Array.prototype.slice,te=Array.prototype.indexOf,re=Array.prototype.push,oe=(e,t)=>te.call(e,t),i=(e,t)=>-1<oe(e,t),c=(r,o)=>{for(let e=0,t=r.length;e<t;e++)if(o(r[e],e))return!0;return!1},ne=(t,r)=>{var o=[];for(let e=0;e<t;e++)o.push(r(e));return o},h=(t,r)=>{var o=t.length,n=new Array(o);for(let e=0;e<o;e++){var l=t[e];n[e]=r(l,e)}return n},A=(r,o)=>{for(let e=0,t=r.length;e<t;e++)o(r[e],e)},le=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},ae=(r,o)=>{var n=[],l=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];(o(a,e)?n:l).push(a)}return{pass:n,fail:l}},d=(r,o)=>{var n=[];for(let e=0,t=r.length;e<t;e++){var l=r[e];o(l,e)&&n.push(l)}return n},se=(e,r,o)=>(le(e,(e,t)=>{o=r(o,e,t)}),o),ie=(e,r,o)=>(A(e,(e,t)=>{o=r(o,e,t)}),o),me=(r,o,n)=>{for(let e=0,t=r.length;e<t;e++){var l=r[e];if(o(l,e))return E.some(l);if(n(l,e))break}return E.none()},ce=(e,t)=>me(e,t,Z),de=(r,o)=>{for(let e=0,t=r.length;e<t;e++)if(o(r[e],e))return E.some(e);return E.none()},ue=r=>{var o=[];for(let e=0,t=r.length;e<t;++e){if(!P(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);re.apply(o,r[e])}return o},u=(e,t)=>ue(h(e,t)),fe=(r,o)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==o(r[e],e))return!1;return!0},ge=e=>{e=ee.call(e,0);return e.reverse(),e},he=(r,o)=>{var n={};for(let e=0,t=r.length;e<t;e++){var l=r[e];n[String(l)]=o(l,e)}return n},pe=(e,t)=>{e=ee.call(e,0);return e.sort(t),e},ve=(e,t)=>0<=t&&t<e.length?E.some(e[t]):E.none(),be=e=>ve(e,0),we=e=>ve(e,e.length-1),ye=(t,r)=>{for(let e=0;e<t.length;e++){var o=r(t[e],e);if(o.isSome())return o}return E.none()},Ce=Object.keys,xe=Object.hasOwnProperty,p=(r,o)=>{var n=Ce(r);for(let e=0,t=n.length;e<t;e++){var l=n[e];o(r[l],l)}},Te=(e,r)=>Se(e,(e,t)=>({k:t,v:r(e,t)})),Se=(e,r)=>{let o={};return p(e,(e,t)=>{e=r(e,t);o[e.k]=e.v}),o},Re=r=>(e,t)=>{r[t]=e},De=(e,r,o,n)=>{p(e,(e,t)=>{(r(e,t)?o:n)(e,t)})},Oe=(e,t)=>{var r={};return De(e,t,Re(r),O),r},ke=(e,r)=>{let o=[];return p(e,(e,t)=>{o.push(r(e,t))}),o},Ee=e=>ke(e,s),Ae=(e,t)=>ze(e,t)?E.from(e[t]):E.none(),ze=(e,t)=>xe.call(e,t),Ne=(e,t)=>ze(e,t)&&null!=e[t],Be=e=>{for(var t in e)if(xe.call(e,t))return!1;return!0},_e="undefined"!=typeof window?window:Function("return this;")(),je=(t,e)=>{let r=null!=e?e:_e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},Le=(e,t)=>{e=e.split(".");return je(e,t)},We=(e,t)=>Le(e,t),Me=(e,t)=>{t=We(e,t);if(null==t)throw new Error(e+" not available on this browser");return t},Ie=Object.getPrototypeOf,Pe=e=>Me("HTMLElement",e),Fe=e=>{var t=Le("ownerDocument.defaultView",e);return I(e)&&(Pe(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Ie(e).constructor.name))},He=8,Ve=9,qe=11,$e=1,z=e=>e.dom.nodeName.toLowerCase(),Ue=e=>e.dom.nodeType,Ge=e=>Ue(e)===He||"#comment"===z(e),Ke=e=>Ye(e)&&Fe(e.dom),Ye=(t=t=>e=>Ue(e)===t)($e),Je=t(3),Qe=t(Ve),Xe=t(qe),v=t=>e=>Ye(e)&&z(e)===t,Ze=(e,t,r)=>{if(!(M(r)||H(r)||G(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},N=(e,t,r)=>{Ze(e.dom,t,r)},et=(e,t)=>{let r=e.dom;p(t,(e,t)=>{Ze(r,t,e)})},tt=(r,e)=>{p(e,(e,t)=>{e.fold(()=>{b(r,t)},e=>{Ze(r.dom,t,e)})})},rt=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},ot=(e,t)=>E.from(rt(e,t)),b=(e,t)=>{e.dom.removeAttribute(t)},nt=e=>ie(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),lt=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(e,t)=>{var r,t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw r="HTML does not have a single root node",console.error(r,e),new Error(r);return lt(t.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return lt(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return lt(t)},fromDom:lt,fromPoint:(e,t,r)=>E.from(e.dom.elementFromPoint(t,r)).map(lt)},at=(e,t)=>{e=e.dom;if(e.nodeType!==$e)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},st=e=>e.nodeType!==$e&&e.nodeType!==Ve&&e.nodeType!==qe||0===e.childElementCount,it=(e,t)=>{t=void 0===t?document:t.dom;return st(t)?[]:h(t.querySelectorAll(e),B.fromDom)},mt=(e,t)=>{t=void 0===t?document:t.dom;return st(t)?E.none():E.from(t.querySelector(e)).map(B.fromDom)},w=(e,t)=>e.dom===t.dom,ct=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},dt=at,ut=e=>B.fromDom(e.dom.ownerDocument),ft=e=>Qe(e)?e:ut(e),gt=e=>E.from(e.dom.parentNode).map(B.fromDom),ht=e=>E.from(e.dom.parentElement).map(B.fromDom),pt=(e,t)=>{var r=U(t)?t:Z;let o=e.dom;for(var n=[];null!=o.parentNode;){var l=o.parentNode,a=B.fromDom(l);if(n.push(a),!0===r(a))break;o=l}return n},vt=e=>E.from(e.dom.previousSibling).map(B.fromDom),bt=e=>E.from(e.dom.nextSibling).map(B.fromDom),wt=e=>h(e.dom.childNodes,B.fromDom),yt=(e,t)=>{e=e.dom.childNodes;return E.from(e[t]).map(B.fromDom)},Ct=e=>yt(e,0),xt=(t,r)=>{gt(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},Tt=(e,t)=>{bt(e).fold(()=>{gt(e).each(e=>{y(e,t)})},e=>{xt(e,t)})},St=(t,r)=>{Ct(t).fold(()=>{y(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},y=(e,t)=>{e.dom.appendChild(t.dom)},Rt=(e,t,r)=>{yt(e,r).fold(()=>{y(e,t)},e=>{xt(e,t)})},Dt=(e,t)=>{xt(e,t),y(t,e)},Ot=(r,o)=>{A(o,(e,t)=>{t=0===t?r:o[t-1];Tt(t,e)})},kt=(t,e)=>{A(e,e=>{y(t,e)})},Et=e=>{e.dom.textContent="",A(wt(e),e=>{C(e)})},C=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},At=e=>{var t=wt(e);0<t.length&&Ot(e,t),C(e)},zt=(e,t)=>B.fromDom(e.dom.cloneNode(t)),Nt=e=>zt(e,!1),Bt=e=>zt(e,!0),_t=(e,t)=>{t=B.fromTag(t),e=nt(e);return et(t,e),t},jt=(e,t)=>{t=_t(e,t),e=wt(Bt(e));return kt(t,e),t},Lt=(e,t)=>{var t=_t(e,t),r=(Tt(e,t),wt(e));return kt(t,r),C(e),t},Wt=["tfoot","thead","tbody","colgroup"],Mt=e=>i(Wt,e),It=(e,t)=>({rows:e,columns:t}),Pt=(e,t,r)=>({element:e,rowspan:t,colspan:r}),Ft=(e,t,r,o)=>({element:e,rowspan:t,colspan:r,isNew:o}),Ht=(e,t,r,o,n,l)=>({element:e,rowspan:t,colspan:r,row:o,column:n,isLocked:l}),Vt=(e,t,r)=>({element:e,cells:t,section:r}),qt=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),x=(e,t,r)=>({element:e,isNew:t,isLocked:r}),$t=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),Ut=(e,t,r,o)=>({startRow:e,startCol:t,finishRow:r,finishCol:o}),Gt=(e,t,r)=>({element:e,colspan:t,column:r}),Kt=(e,t)=>({element:e,columns:t}),Yt=e=>Xe(e)&&$(e.dom.host),Jt=e=>B.fromDom(e.dom.getRootNode()),Qt=e=>Yt(e)?e:B.fromDom(ft(e).dom.body),Xt=e=>{e=Jt(e);return Yt(e)?E.some(e):E.none()},Zt=e=>B.fromDom(e.dom.host),er=e=>{if($(e.target)){var t=B.fromDom(e.target);if(Ye(t)&&tr(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return be(t)}}return E.from(e.target)},tr=e=>$(e.dom.shadowRoot),rr=e=>{let t=Je(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return Xt(B.fromDom(t)).fold(()=>r.body.contains(t),Y(rr,Zt))},or=()=>nr(B.fromDom(document)),nr=e=>{e=e.dom.body;if(null==e)throw new Error("Body is not available yet");return B.fromDom(e)},lr=(e,t,r)=>d(pt(e,r),t),ar=(e,t)=>d(wt(e),t),sr=(e,t)=>{let r=[];return A(wt(e),e=>{r=(r=t(e)?r.concat([e]):r).concat(sr(e,t))}),r},ir=(e,t,r)=>lr(e,e=>at(e,t),r),mr=(e,t)=>ar(e,e=>at(e,t)),cr=(e,t)=>it(t,e);var dr,ur=(e,t,r,o,n)=>e(r,o)?E.some(r):U(n)&&n(r)?E.none():t(r,o,n);let fr=(e,t,r)=>{let o=e.dom;for(var n=U(r)?r:Z;o.parentNode;){o=o.parentNode;var l=B.fromDom(o);if(t(l))return E.some(l);if(n(l))break}return E.none()},gr=(e,t,r)=>ur((e,t)=>t(e),fr,e,t,r),hr=(e,t)=>ce(e.dom.childNodes,e=>t(B.fromDom(e))).map(B.fromDom),pr=(e,o)=>{let n=t=>{for(let e=0;e<t.childNodes.length;e++){var r=B.fromDom(t.childNodes[e]);if(o(r))return E.some(r);r=n(t.childNodes[e]);if(r.isSome())return r}return E.none()};return n(e.dom)},vr=(e,t,r)=>fr(e,e=>at(e,t),r),br=(e,t)=>hr(e,e=>at(e,t)),wr=(e,t)=>mt(t,e),T=(e,t,r)=>ur((e,t)=>at(e,t),vr,e,t,r),yr=(e,t,r=J)=>e.exists(e=>r(e,t)),Cr=t=>{let r=[];var o=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(o);return r},xr=(e,t)=>null!=e?t(e):E.none(),Tr=(e,t)=>e?E.some(t):E.none(),Sr=(e,t)=>e.substring(t),Rr=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Dr=(e,t)=>Or(e,t)?Sr(e,t.length):e,r=(e,t,r=0,o)=>{e=e.indexOf(t,r);return-1!==e&&(!!V(o)||e+t.length<=o)},Or=(e,t)=>Rr(e,t,0),kr=(e,t)=>Rr(e,t,e.length-t.length),Er=(dr=/^\s+|\s+$/g,e=>e.replace(dr,"")),Ar=e=>0<e.length,zr=e=>{e=parseFloat(e);return isNaN(e)?E.none():E.some(e)},Nr=e=>void 0!==e.style&&U(e.style.getPropertyValue),Br=(e,t,r)=>{if(!M(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);Nr(e)&&e.style.setProperty(t,r)},_r=(e,t)=>{Nr(e)&&e.style.removeProperty(t)},S=(e,t,r)=>{e=e.dom;Br(e,t,r)},jr=(e,t)=>{let r=e.dom;p(t,(e,t)=>{Br(r,t,e)})},Lr=(e,t)=>{var r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||rr(e)?o:Wr(r,t)},Wr=(e,t)=>Nr(e)?e.style.getPropertyValue(t):"",Mr=(e,t)=>{e=e.dom,e=Wr(e,t);return E.from(e).filter(e=>0<e.length)},Ir=(e,t)=>{var r=e.dom;_r(r,t),yr(ot(e,"style").map(Er),"")&&b(e,"style")},Pr=(e,t)=>{e=e.dom,t=t.dom;Nr(e)&&Nr(t)&&(t.style.cssText=e.style.cssText)},Fr=(e,t,r=0)=>ot(e,t).map(e=>parseInt(e,10)).getOr(r),Hr=(e,t)=>Fr(e,t,1),Vr=e=>v("col")(e)?1<Fr(e,"span",1):1<Hr(e,"colspan"),qr=e=>1<Hr(e,"rowspan"),$r=(e,t)=>parseInt(Lr(e,t),10),Ur=g(10),Gr=g(10),Kr=(e,t)=>Yr(e,t,k),Yr=(e,t,r)=>u(wt(e),e=>at(e,t)?r(e)?[e]:[]:Yr(e,t,r)),Jr=(e,t,r=Z)=>r(t)?E.none():i(e,z(t))?E.some(t):vr(t,e.join(","),e=>at(e,"table")||r(e)),Qr=(e,t)=>Jr(["td","th"],e,t),Xr=e=>Kr(e,"th,td"),Zr=e=>at(e,"colgroup")?mr(e,"col"):u(to(e),e=>mr(e,"col")),R=(e,t)=>T(e,"table",t),eo=e=>Kr(e,"tr"),to=e=>R(e).fold(g([]),e=>mr(e,"colgroup")),ro=(e,r)=>h(e,e=>{var t;return"colgroup"===z(e)?(t=h(Zr(e),e=>{var t=Fr(e,"span",1);return Pt(e,1,t)}),Vt(e,t,"colgroup")):(t=h(Xr(e),e=>{var t=Fr(e,"rowspan",1),r=Fr(e,"colspan",1);return Pt(e,t,r)}),Vt(e,t,r(e)))}),oo=e=>gt(e).map(e=>{e=z(e);return Mt(e)?e:"tbody"}).getOr("tbody"),no=e=>{var t=eo(e),e=[...to(e),...t];return ro(e,oo)},lo=(e,t)=>ro(e,()=>t),ao=t=>{let r=!1,o;return(...e)=>(r||(r=!0,o=t.apply(null,e)),o)},so=(t,r)=>{for(let e=0;e<t.length;e++){var o=t[e];if(o.test(r))return o}},io=()=>mo(0,0),mo=(e,t)=>({major:e,minor:t}),co={nu:mo,detect:(e,t)=>{t=String(t).toLowerCase();return 0===e.length?io():((e,t)=>{let r=so(e,t);return r?(e=e=>Number(t.replace(r,"$"+e)),mo(e(1),e(2))):{major:0,minor:0}})(e,t)},unknown:io},uo=(e,t)=>{let r=String(t).toLowerCase();return ce(e,e=>e.search(r))},fo=(t=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>r(e,"edge/")&&r(e,"chrome")&&r(e,"safari")&&r(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,o=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:e=>r(e,"chrome")&&!r(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>r(e,"msie")||r(e,"trident")},{name:"Opera",versionRegexes:[o,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(e=t=>e=>r(e,t))("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[o,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(r(e,"safari")||r(e,"mobile/"))&&r(e,"applewebkit")}],o=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>r(e,"iphone")||r(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],{browsers:g(t),oses:g(o)}),go="Edge",ho="Chromium",po="IE",vo="Opera",bo="Firefox",wo="Safari",yo=e=>{let t=e.current;var r=e=>()=>t===e;return{current:t,version:e.version,isEdge:r(go),isChromium:r(ho),isIE:r(po),isOpera:r(vo),isFirefox:r(bo),isSafari:r(wo)}},Co={unknown:()=>yo({current:void 0,version:co.unknown()}),nu:yo,edge:g(go),chromium:g(ho),ie:g(po),opera:g(vo),firefox:g(bo),safari:g(wo)},xo="Windows",To="iOS",So="Android",Ro="Linux",Do="macOS",Oo="Solaris",ko="FreeBSD",Eo="ChromeOS",Ao=e=>{let t=e.current;var r=e=>()=>t===e;return{current:t,version:e.version,isWindows:r(xo),isiOS:r(To),isAndroid:r(So),isMacOS:r(Do),isLinux:r(Ro),isSolaris:r(Oo),isFreeBSD:r(ko),isChromeOS:r(Eo)}},zo={unknown:()=>Ao({current:void 0,version:co.unknown()}),nu:Ao,windows:g(xo),ios:g(To),android:g(So),linux:g(Ro),macos:g(Do),solaris:g(Oo),freebsd:g(ko),chromeos:g(Eo)},No={detect:(t,e,r)=>{let n=fo.browsers();var o,l,a,s,i,m,c,d=fo.oses(),e=e.bind(e=>{return o=n,e=e,ye(e.brands,t=>{let r=t.brand.toLowerCase();return ce(o,e=>r===(null==(e=e.brand)?void 0:e.toLowerCase())).map(e=>({current:e.name,version:co.nu(parseInt(t.version,10),0)}))});var o}).orThunk(()=>{return e=n,r=t,uo(e,r).map(e=>{var t=co.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(Co.unknown,Co.nu),d=(d=d,o=t,uo(d,o).map(e=>{var t=co.detect(e.versionRegexes,o);return{current:e.name,version:t}}).fold(zo.unknown,zo.nu)),u=(a=e,s=t,r=r,u=(l=d).isiOS()&&!0===/ipad/i.test(s),i=l.isiOS()&&!u,m=l.isiOS()||l.isAndroid(),c=m||r("(pointer:coarse)"),r=u||!i&&m&&r("(min-device-width:768px)"),m=i||m&&!r,a=a.isSafari()&&l.isiOS()&&!1===/safari/i.test(s),s=!m&&!r&&!a,{isiPad:g(u),isiPhone:g(i),isTablet:g(r),isPhone:g(m),isTouch:g(c),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:g(a),isDesktop:g(s)});return{browser:e,os:d,deviceType:u}}},Bo=e=>window.matchMedia(e).matches,_o=ao(()=>No.detect(window.navigator.userAgent,E.from(window.navigator.userAgentData),Bo)),jo=()=>_o(),Lo=(e,t)=>zr(e).getOr(t),Wo=(e,t,r)=>Lo(Lr(e,t),r),Mo=(e,t,r,o)=>t-Wo(e,"padding-"+r,0)-Wo(e,"padding-"+o,0)-Wo(e,`border-${r}-width`,0)-Wo(e,`border-${o}-width`,0),Io=(e=(r,o)=>{var e=e=>{var t=o(e);return t<=0||null===t?(e=Lr(e,r),parseFloat(e)||0):t};let n=(r,e)=>ie(e,(e,t)=>{t=Lr(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!G(t)&&!t.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+t);e=e.dom;Nr(e)&&(e.style[r]=t+"px")},get:e,getOuter:e,aggregate:n,max:(e,t,r)=>{e=n(e,r);return e<t?t-e:0}}})("width",e=>e.dom.offsetWidth),Po=e=>Io.get(e),Fo=e=>Io.getOuter(e),Ho=e=>{return t="content-box",r=(r=(e=e).dom).getBoundingClientRect().width||r.offsetWidth,"border-box"===t?r:Mo(e,r,"left","right");var t,r},Vo=e=>Wo(e,"width",e.dom.offsetWidth),qo=(e,t,r)=>{var o=e.cells,n=o.slice(0,t),o=o.slice(t),t=n.concat(r).concat(o);return Go(e,t)},$o=(e,t,r)=>qo(e,t,[r]),Uo=(e,t,r)=>{e.cells[t]=r},Go=(e,t)=>$t(e.element,t,e.section,e.isNew),Ko=(e,t)=>{var r=e.cells,r=h(r,t);return $t(e.element,r,e.section,e.isNew)},Yo=(e,t)=>e.cells[t],D=(e,t)=>Yo(e,t).element,Jo=e=>e.cells.length,_=e=>{e=ae(e,e=>"colgroup"===e.section);return{rows:e.fail,cols:e.pass}},Qo=(e,t,r)=>{r=h(e.cells,r);return $t(t(e.element),r,e.section,!0)},Xo="data-snooker-locked-cols",Zo=e=>ot(e,Xo).bind(e=>E.from(e.match(/\d+/g))).map(e=>he(e,k)),en=e=>{e=ie(_(e).rows,(r,e)=>(A(e.cells,(e,t)=>{e.isLocked&&(r[t]=!0)}),r),{}),e=ke(e,(e,t)=>parseInt(t,10));return pe(e)},tn=(e,t)=>e+","+t,rn=(e,t)=>{e=u(e.all,e=>e.cells);return d(e,t)},on=e=>{let o={},n=0;return A(e.cells,t=>{let r=t.colspan;ne(r,e=>{e=n+e;o[e]=Gt(t.element,r,e)}),n+=r}),o},nn=e=>{let s={},r=[];let i=be(e).map(e=>e.element).bind(R).bind(Zo).getOr({}),o=0,m=0,c=0;var{pass:e,fail:t}=ae(e,e=>"colgroup"===e.section),{columns:t,colgroups:e}=(A(t,e=>{let t=[];A(e.cells,r=>{let o=0;for(;void 0!==s[tn(c,o)];)o++;var e=Ne(i,o.toString()),n=Ht(r.element,r.rowspan,r.colspan,c,o,e);for(let t=0;t<r.colspan;t++)for(let e=0;e<r.rowspan;e++){var l=c+e,a=o+t,l=tn(l,a);s[l]=n,m=Math.max(m,a+1)}t.push(n)}),o++,r.push(Vt(e.element,t,e.section)),c++}),we(e).map(e=>{var t=on(e);return{colgroups:[Kt(e.element,Ee(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})));return{grid:It(o,m),access:s,all:r,columns:t,colgroups:e}},j={fromTable:e=>{e=no(e);return nn(e)},generate:nn,getAt:(e,t,r)=>E.from(e.access[tn(t,r)]),findItem:(e,t,r)=>{e=rn(e,e=>r(t,e.element));return 0<e.length?E.some(e[0]):E.none()},filterItems:rn,justCells:e=>u(e.all,e=>e.cells),justColumns:e=>Ee(e.columns),hasColumns:e=>0<Ce(e.columns).length,getColumnAt:(e,t)=>E.from(e.columns[t])},ln=(r,o=k)=>{var e=r.grid,t=ne(e.columns,s);let n=ne(e.rows,s);return h(t,t=>an(()=>u(n,e=>j.getAt(r,e,t).filter(e=>e.column===t).toArray()),e=>1===e.colspan&&o(e.element),()=>j.getAt(r,0,t)))},an=(e,t,r)=>{let o=e();return ce(o,t).orThunk(()=>E.from(o[0]).orThunk(r)).map(e=>e.element)},sn=r=>{var e=r.grid,t=ne(e.rows,s);let o=ne(e.columns,s);return h(t,t=>an(()=>u(o,e=>j.getAt(r,t,e).filter(e=>e.row===t).fold(g([]),e=>[e])),e=>1===e.rowspan,()=>j.getAt(r,t,0)))},mn=(t,r)=>{if(r<0||r>=t.length-1)return E.none();var e=t[r].fold(()=>{var e=ge(t.slice(0,r));return ye(e,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>E.some({value:e,delta:0}));let o=t[r+1].fold(()=>{var e=t.slice(r+1);return ye(e,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>E.some({value:e,delta:1}));return e.bind(r=>o.map(e=>{var t=e.delta+r.delta;return Math.abs(e.value-r.value)/t}))},cn=(t,r)=>e=>"rtl"===dn(e)?r:t,dn=e=>"rtl"===Lr(e,"direction")?"rtl":"ltr",un=e("height",e=>{var t=e.dom;return rr(e)?t.getBoundingClientRect().height:t.offsetHeight}),fn=e=>un.get(e),gn=e=>un.getOuter(e),hn=e=>Wo(e,"height",e.dom.offsetHeight),pn=(r,o)=>({left:r,top:o,translate:(e,t)=>pn(r+e,o+t)}),vn=pn,bn=e=>{e=e.getBoundingClientRect();return vn(e.left,e.top)},wn=(e,t)=>void 0!==e?e:void 0!==t?t:0,yn=e=>{var t,r,o=e.dom.ownerDocument,n=o.body,l=o.defaultView,o=o.documentElement;return n===e.dom?vn(n.offsetLeft,n.offsetTop):(t=wn(null==l?void 0:l.pageYOffset,o.scrollTop),l=wn(null==l?void 0:l.pageXOffset,o.scrollLeft),r=wn(o.clientTop,n.clientTop),o=wn(o.clientLeft,n.clientLeft),Cn(e).translate(l-o,t-r))},Cn=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?vn(r.offsetLeft,r.offsetTop):rr(e)?bn(t):vn(0,0)},xn=(e,t)=>({row:e,y:t}),Tn=(e,t)=>({col:e,x:t}),Sn=e=>yn(e).left+Fo(e),Rn=e=>yn(e).left,Dn=(e,t)=>Tn(e,Rn(t)),On=(e,t)=>Tn(e,Sn(t)),kn=e=>yn(e).top,En=(e,t)=>xn(e,kn(t)),An=(e,t)=>xn(e,kn(t)+gn(t)),zn=(r,t,o)=>{var e,n;return 0===o.length?[]:(e=h(o.slice(1),(e,t)=>e.map(e=>r(t,e))),n=o[o.length-1].map(e=>t(o.length-1,e)),e.concat([n]))},Nn={delta:s,positions:e=>zn(En,An,e),edge:kn};var t={delta:s,edge:Rn,positions:e=>zn(Dn,On,e)},o={delta:e=>-e,edge:Sn,positions:e=>zn(On,Dn,e)};let Bn=cn(t,o),_n={delta:(e,t)=>Bn(t).delta(e,t),positions:(e,t)=>Bn(t).positions(e,t),edge:e=>Bn(e).edge(e)},jn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ln=(e="[eE][+-]?[0-9]+",t=["Infinity",(t="[0-9]+")+"\\."+(o=e=>`(?:${e})?`)(t)+o(e),"\\."+t+o(e),t+o(e)].join("|"),new RegExp(`^(${`[+-]?(?:${t})`})(.*)$`)),Wn=(t,e)=>c(e,e=>c(jn[e],e=>t===e)),Mn=(e,r)=>E.from(Ln.exec(e)).bind(e=>{var t=Number(e[1]),e=e[2];return Wn(e,r)?E.some({value:t,unit:e}):E.none()}),In=/(\d+(\.\d+)?)%/,Pn=/(\d+(\.\d+)?)px|em/,Fn=v("col"),Hn=v("tr"),Vn=(e,t,r)=>{var o=ht(e).getOrThunk(()=>nr(ut(e)));return t(e)/r(o)*100},qn=(e,t)=>{S(e,"width",t+"px")},$n=(e,t)=>{S(e,"width",t+"%")},Un=(e,t)=>{S(e,"height",t+"px")},Gn=e=>{Ir(e,"height")},Kn=e=>hn(e)+"px",Yn=(e,t,r,o)=>{var n=R(e).map(e=>{e=r(e);return Math.floor(t/100*e)}).getOr(t);return o(e,n),n},Jn=(e,t,r,o)=>{var n=parseFloat(e);return kr(e,"%")&&"table"!==z(t)?Yn(t,n,r,o):n},Qn=e=>{var t=Kn(e);return t?Jn(t,e,fn,Un):fn(e)},Xn=(e,t,r)=>r(e)/Hr(e,t),Zn=(e,t)=>Mr(e,t).orThunk(()=>ot(e,t).map(e=>e+"px")),el=e=>Zn(e,"width"),tl=e=>Zn(e,"height"),rl=e=>Vn(e,Po,Ho),ol=e=>(Fn(e)?Po:Vo)(e),nl=e=>Hn(e)?fn(e):Xn(e,"rowspan",Qn),ll=e=>el(e).bind(e=>Mn(e,["fixed","relative","empty"])),al=(e,t,r)=>{S(e,"width",t+r)},sl=e=>Po(e)+"px",il=e=>fn(e)+"px",ml=e=>Vn(e,Po,Ho)+"%",cl=g(In),dl=v("col"),ul=e=>el(e).getOrThunk(()=>ol(e)+"px"),fl=e=>tl(e).getOrThunk(()=>nl(e)+"px"),gl=e=>h(j.justColumns(e),e=>E.from(e.element)),hl=e=>{var t=jo().browser,t=t.isChromium()||t.isFirefox();return!dl(e)||t},pl=(e,t,r,o,n,l)=>e.filter(o).fold(()=>l(mn(r,t)),e=>n(e)),vl=(e,t,r,o)=>{let n=ln(e);e=j.hasColumns(e)?gl(e):n;let l=[E.some(_n.edge(t))].concat(h(_n.positions(n,t),e=>e.map(e=>e.x))),a=Q(Vr);return h(e,(e,t)=>pl(e,t,l,a,e=>hl(e)?r(e):(e=xr(n[t],s),pl(e,t,l,a,e=>o(E.some(Po(e))),o)),o))},bl=e=>e.map(e=>e+"px").getOr(""),wl=(e,t)=>vl(e,t,ul,bl),yl=(e,t,r)=>vl(e,t,rl,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),Cl=(e,t,r)=>vl(e,t,ol,e=>e.getOrThunk(r.minCellWidth)),xl=(e,t,r,o)=>{var n=sn(e),e=h(e.all,e=>E.some(e.element));let l=[E.some(Nn.edge(t))].concat(h(Nn.positions(n,t),e=>e.map(e=>e.y)));return h(e,(e,t)=>pl(e,t,l,k,r,o))},Tl=(e,t)=>xl(e,t,nl,e=>e.getOrThunk(Gr)),Sl=(e,t)=>xl(e,t,fl,bl),Rl=(e,t)=>()=>rr(e)?t(e):parseFloat(Mr(e,"width").getOr("0")),Dl=r=>{var e=Rl(r,Po),t=g(0);return{width:e,pixelWidth:e,getWidths:(e,t)=>Cl(e,r,t),getCellDelta:t,singleColumnWidth:g([0]),minCellWidth:t,setElementWidth:O,adjustTableWidth:O,isRelative:!0,label:"none"}},Ol=r=>{let o=Rl(r,e=>parseFloat(ml(e))),t=Rl(r,Po);return{width:o,pixelWidth:t,getWidths:(e,t)=>yl(e,r,t),getCellDelta:e=>e/t()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Ur()/t()*100,setElementWidth:$n,adjustTableWidth:e=>{var t=o(),e=t+e/100*t;$n(r,e)},isRelative:!0,label:"percent"}},kl=r=>{let t=Rl(r,Po);var e=s;return{width:t,pixelWidth:t,getWidths:(e,t)=>Cl(e,r,t),getCellDelta:e,singleColumnWidth:(e,t)=>[Math.max(Ur(),e+t)-e],minCellWidth:Ur,setElementWidth:qn,adjustTableWidth:e=>{e=t()+e;qn(r,e)},isRelative:!1,label:"pixel"}},El={getTableSize:r=>el(r).fold(()=>Dl(r),e=>{return t=r,e=e,(null!==cl().exec(e)?Ol:kl)(t);var t}),pixelSize:kl,percentageSize:Ol,noneSize:Dl},Al=(e,t,r,o,n,l)=>({minRow:e,minCol:t,maxRow:r,maxCol:o,allCells:n,selectedCells:l}),zl=(e,n)=>{var t=e.grid.columns;let l=e.grid.rows,a=t,s=0,i=0,m=[],c=[];return p(e.access,e=>{var t,r,o;m.push(e),n(e)&&(c.push(e),r=(t=e.row)+e.rowspan-1,e=(o=e.column)+e.colspan-1,t<l?l=t:r>s&&(s=r),o<a?a=o:e>i&&(i=e))}),Al(l,a,s,i,m,c)},Nl=(e,t,r)=>{e=e[r].element,r=B.fromTag("td");y(r,B.fromTag("br")),(t?y:St)(e,r)},Bl=(e,o,n,l)=>{var a=d(e,e=>"colgroup"!==e.section),s=o.grid.columns,t=o.grid.rows;for(let r=0;r<t;r++){let t=!1;for(let e=0;e<s;e++)r<n.minRow||r>n.maxRow||e<n.minCol||e>n.maxCol||(j.getAt(o,r,e).filter(l).isNone()?Nl(a,t,r):t=!0)}},_l=(e,t,r,o)=>{p(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&C(e.element)});r=d(Kr(e,"tr"),e=>0===e.dom.childElementCount);A(r,C),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||A(Kr(e,"th,td"),e=>{b(e,"rowspan"),b(e,"colspan")}),b(e,Xo),b(e,"data-snooker-col-series"),El.getTableSize(e).adjustTableWidth(o)},jl=(e,t,r,o)=>0===o.minCol&&t.grid.columns===o.maxCol+1?0:(t=Cl(t,e,r),e=ie(t,(e,t)=>e+t,0),t=ie(t.slice(o.minCol,o.maxCol+1),(e,t)=>e+t,0)/e*r.pixelWidth()-r.pixelWidth(),r.getCellDelta(t)),Ll=(e,t)=>{var r=e=>at(e.element,t),o=Bt(e),n=no(o),l=El.getTableSize(e),a=j.generate(n),s=zl(a,r);let i="th:not("+t+"),td:not("+t+")";var m=Yr(o,"th,td",e=>at(e,i)),m=(A(m,C),Bl(n,a,s,r),j.fromTable(e)),n=jl(e,m,l,s);return _l(o,s,a,n),o},Wl="Â ",Ml=((r,o)=>{let t=e=>r(e)?E.from(e.dom.nodeValue):E.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get "+o+" value of a "+o+" node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw "+o+" value of a "+o+" node");e.dom.nodeValue=t}}})(Je,"text"),Il=e=>Ml.get(e),Pl=e=>Ml.getOption(e),Fl=(e,t)=>Ml.set(e,t),Hl=e=>"img"===z(e)?1:Pl(e).fold(()=>wt(e).length,e=>e.length),Vl=e=>Pl(e).filter(e=>0!==e.trim().length||-1<e.indexOf(Wl)).isSome(),ql=e=>Ke(e)&&"false"===rt(e,"contenteditable"),$l=["img","br"],Ul=e=>Vl(e)||i($l,z(e))||ql(e),Gl=e=>pr(e,Ul),Kl=e=>Yl(e,Ul),Yl=(e,o)=>{let n=e=>{var t=wt(e);for(let e=t.length-1;0<=e;e--){var r=t[e];if(o(r))return E.some(r);r=n(r);if(r.isSome())return r}return E.none()};return n(e)},Jl={scope:["row","col"]},Ql=t=>()=>{var e=B.fromTag("td",t.dom);return y(e,B.fromTag("br",t.dom)),e},Xl=e=>()=>B.fromTag("col",e.dom),Zl=e=>()=>B.fromTag("colgroup",e.dom),ea=e=>()=>B.fromTag("tr",e.dom),ta=(e,t,r)=>{let o=jt(e,t);return p(r,(e,t)=>{null===e?b(o,t):N(o,t,e)}),o},ra=e=>e,oa=(r,o,n)=>Gl(r).map(e=>{var t=n.join(","),e=ir(e,t,e=>w(e,r));return se(e,(e,t)=>{t=Nt(t);return y(e,t),t},o)}).getOr(o),na=(e,o)=>{p(Jl,(t,r)=>ot(e,r).filter(e=>i(t,e)).each(e=>N(o,r,e)))},la=(o,n,l)=>{let a=(e,t)=>{Pr(e.element,t),Ir(t,"height"),1!==e.colspan&&Ir(t,"width")};return{col:e=>{var t=B.fromTag(z(e.element),n.dom);return a(e,t),o(e.element,t),t},colgroup:Zl(n),row:ea(n),cell:e=>{var t=B.fromTag(z(e.element),n.dom),r=l.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),r=0<r.length?oa(e.element,t,r):t;return y(r,B.fromTag("br")),a(e,t),na(e.element,t),o(e.element,t),t},replace:ta,colGap:Xl(n),gap:Ql(n)}},aa=e=>({col:Xl(e),colgroup:Zl(e),row:ea(e),cell:Ql(e),replace:ra,colGap:Xl(e),gap:Ql(e)}),sa=(e,t)=>{t=(t||document).createElement("div");return t.innerHTML=e,wt(B.fromDom(t))},ia=e=>h(e,B.fromDom),ma="100%",ca=e=>{var t=e.dom,t=null!=(t=t.getParent(e.selection.getStart(),t.isBlock))?t:e.getBody();return Ho(B.fromDom(t))+"px"},da=(e,t)=>Ta(e)||!Ra(e)?t:xa(e)?{...t,width:ca(e)}:{...t,width:ma},ua=(e,t)=>Ta(e)||Ra(e)?t:xa(e)?{...t,width:ca(e)}:{...t,width:ma},fa=e=>{e=e.options.register;e("table_clone_elements",{processor:"string[]"}),e("table_use_colgroups",{processor:"boolean",default:!0}),e("table_header_type",{processor:e=>{var t=i(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),e("table_sizing_mode",{processor:"string",default:"auto"}),e("table_default_attributes",{processor:"object",default:{border:"1"}}),e("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),e("table_column_resizing",{processor:e=>{var t=i(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),e("table_resize_bars",{processor:"boolean",default:!0}),e("table_style_by_css",{processor:"boolean",default:!0}),e("table_merge_content_on_paste",{processor:"boolean",default:!0})},ga=e=>E.from(e.options.get("table_clone_elements")),ha=e=>{e=e.options.get("object_resizing");return i(e.split(","),"table")},pa=(o=t=>e=>e.options.get(t))("table_header_type"),va=o("table_column_resizing"),ba=e=>"preservetable"===va(e),wa=e=>"resizetable"===va(e),ya=o("table_sizing_mode"),Ca=e=>"relative"===ya(e),xa=e=>"fixed"===ya(e),Ta=e=>"responsive"===ya(e),Sa=o("table_resize_bars"),Ra=o("table_style_by_css"),Da=o("table_merge_content_on_paste"),Oa=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:ua(e,r)},ka=e=>{var t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:da(e,r)},Ea=o("table_use_colgroups"),Aa=e=>T(e,"[contenteditable]"),za=(e,t=!1)=>rr(e)?e.dom.isContentEditable:Aa(e).fold(g(t),e=>"true"===Na(e)),Na=e=>e.dom.contentEditable,Ba=e=>B.fromDom(e.getBody()),_a=t=>e=>w(e,Ba(t)),ja=e=>{b(e,"data-mce-style");var t=e=>b(e,"data-mce-style");A(Xr(e),t),A(Zr(e),t),A(eo(e),t)},La=e=>B.fromDom(e.selection.getStart()),Wa=e=>e.getBoundingClientRect().width,Ma=e=>e.getBoundingClientRect().height,Ia=(e=r=>(e,t)=>{e=e.dom.getStyle(t,r)||e.dom.getAttrib(t,r);return E.from(e).filter(Ar)})("width"),Pa=e("height"),Fa=e=>/^(\d+(\.\d+)?)%$/.test(e),Ha=e=>/^(\d+(\.\d+)?)px$/.test(e),Va=e=>gr(e,v("table")).exists(za),qa=(e,t)=>t.column<=e.finishCol&&t.column+t.colspan-1>=e.startCol&&t.row<=e.finishRow&&t.row+t.rowspan-1>=e.startRow,$a=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ua=(r,o)=>{let n=!0;var l=f($a,o);for(let t=o.startRow;t<=o.finishRow;t++)for(let e=o.startCol;e<=o.finishCol;e++)n=n&&j.getAt(r,t,e).exists(l);return n?E.some(o):E.none()},Ga=(e,t)=>Ut(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),Ka=(e,t,r)=>{t=j.findItem(e,t,w);let o=j.findItem(e,r,w);return t.bind(t=>o.map(e=>Ga(t,e)))},Ya=(t,e,r)=>Ka(t,e,r).bind(e=>Ua(t,e)),Ja=(r,e,o,n)=>j.findItem(r,e,w).bind(e=>{var t=0<o?e.row+e.rowspan-1:e.row,e=0<n?e.column+e.colspan-1:e.column;return j.getAt(r,t+o,e+n).map(e=>e.element)}),Qa=(t,e,r)=>Ka(t,e,r).map(e=>{e=j.filterItems(t,f(qa,e));return h(e,e=>e.element)}),Xa=(e,t)=>j.findItem(e,t,(e,t)=>ct(t,e)).map(e=>e.element),Za=(t,r,o)=>R(t).bind(e=>{e=os(e);return Ja(e,t,r,o)}),es=(e,t,r)=>{e=os(e);return Qa(e,t,r)},ts=(e,t,r,o,n)=>{let l=os(e);r=w(e,r)?E.some(t):Xa(l,t);let a=w(e,n)?E.some(o):Xa(l,o);return r.bind(t=>a.bind(e=>Qa(l,t,e)))},rs=(e,t,r)=>{e=os(e);return Ya(e,t,r)},os=j.fromTable;var ns=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let ls=(r,o,e,t)=>{e=o(r,e);return se(t,(e,t)=>{t=o(r,t);return as(r,e,t)},e)},as=(t,e,r)=>e.bind(e=>r.filter(f(t.eq,e))),ss=(e,t,r)=>0<r.length?(e=e,t=t,r=r,ls(e,t,r[0],r.slice(1))):E.none(),is=(t,e,r,o=Z)=>{var e=[e].concat(t.up().all(e)),r=[r].concat(t.up().all(r)),n=t=>de(t,o).fold(()=>t,e=>t.slice(0,e+1)),e=n(e);let l=n(r);n=ce(e,e=>c(l,f(t.eq,e)));return{firstpath:e,secondpath:l,shared:n}},ms=(t=()=>({up:g({selector:vr,closest:T,predicate:fr,all:pt}),down:g({selector:cr,predicate:sr}),styles:g({get:Lr,getRaw:Mr,set:S,remove:Ir}),attrs:g({get:rt,set:N,remove:b,copyTo:(e,t)=>{e=nt(e);et(t,e)}}),insert:g({before:xt,after:Tt,afterAll:Ot,append:y,appendAll:kt,prepend:St,wrap:Dt}),remove:g({unwrap:At,remove:C}),create:g({nu:B.fromTag,clone:e=>B.fromDom(e.dom.cloneNode(!1)),text:B.fromText}),query:g({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:vt,nextSibling:bt}),property:g({children:wt,name:z,parent:gt,document:e=>ft(e).dom,isText:Je,isComment:Ge,isElement:Ye,isSpecial:e=>{e=z(e);return i(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:e=>Ye(e)?ot(e,"lang"):E.none(),getText:Il,setText:Fl,isBoundary:e=>!!Ye(e)&&("body"===z(e)||i(ns,z(e))),isEmptyTag:e=>!!Ye(e)&&i(["br","img","hr","input"],z(e)),isNonEditable:e=>Ye(e)&&"false"===rt(e,"contenteditable")}),eq:w,is:dt}))(),cs=(r,e)=>ss(ms,(e,t)=>r(t),e),ds=(e,t,r)=>is(ms,e,t,r),us=e=>vr(e,"table"),fs=(l,a,r)=>{let s=t=>e=>void 0!==r&&r(e)||w(e,t);return w(l,a)?E.some({boxes:E.some([l]),start:l,finish:a}):us(l).bind(n=>us(a).bind(o=>{var e;return w(n,o)?E.some({boxes:es(n,l,a),start:l,finish:a}):ct(n,o)?(e=0<(e=ir(a,"td,th",s(n))).length?e[e.length-1]:a,E.some({boxes:ts(n,l,n,a,o),start:l,finish:e})):ct(o,n)?(e=0<(e=ir(l,"td,th",s(o))).length?e[e.length-1]:l,E.some({boxes:ts(o,l,n,a,o),start:l,finish:e})):ds(l,a).shared.bind(e=>T(e,"table",r).bind(e=>{var t=ir(a,"td,th",s(e)),t=0<t.length?t[t.length-1]:a,r=ir(l,"td,th",s(e)),r=0<r.length?r[r.length-1]:l;return E.some({boxes:ts(e,l,n,a,o),start:r,finish:t})}))}))},gs=(e,t)=>{e=cr(e,t);return 0<e.length?E.some(e):E.none()},hs=(e,t)=>ce(e,e=>at(e,t)),ps=(e,t,o)=>wr(e,t).bind(r=>wr(e,o).bind(t=>cs(us,[r,t]).map(e=>({first:r,last:t,table:e})))),vs=(t,r)=>vr(t,"table").bind(e=>wr(e,r).bind(e=>fs(e,t).bind(t=>t.boxes.map(e=>({boxes:e,start:t.start,finish:t.finish}))))),bs=(e,t,r,o,n)=>hs(e,n).bind(e=>Za(e,t,r).bind(e=>vs(e,o))),ws=(e,t)=>gs(e,t),ys=(l,e,t)=>ps(l,e,t).bind(r=>{var e=e=>w(l,e),t="thead,tfoot,tbody,table",o=vr(r.first,t,e);let n=vr(r.last,t,e);return o.bind(t=>n.bind(e=>w(t,e)?rs(r.table,r.first,r.last):E.none()))}),Cs=s,xs=e=>{let t=(e,t)=>ot(e,t).exists(e=>1<parseInt(e,10));return 0<e.length&&fe(e,e=>t(e,"rowspan")||t(e,"colspan"))?E.some(e):E.none()},Ts=(e,t,r)=>t.length<=1?E.none():ys(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t}));var n="data-mce-last-selected";let Ss="[data-mce-selected]",Rs={selected:o="data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:e="data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:n,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Ds=(e,t,r)=>({element:r,mergable:Ts(t,e,Rs),unmergable:xs(e),selection:Cs(e)}),Os=(e,t,r)=>({element:e,clipboard:t,generators:r}),ks=(e,t,r,o)=>({selection:Cs(e),clipboard:r,generators:o}),Es=(o=o=>(e,t)=>{var r=z(e),r="col"===r||"colgroup"===r?(r=e,R(r).bind(e=>ws(e,Rs.firstSelectedSelector)).fold(g(r),e=>e[0])):e;return T(r,o,t)})("th,td,caption"),As=o("th,td"),zs=e=>ia(e.model.table.getSelectedCells()),Ns=e=>d(zs(e),e=>at(e,Rs.selectedSelector)),Bs=e=>R(e[0]).map(e=>{e=Ll(e,Ss);return ja(e),[e]}),_s=(t,e)=>h(e,e=>t.selection.serializer.serialize(e.dom,{})).join(""),js=(e,t)=>{var r=e.getDoc(),e=Jt(B.fromDom(e.getBody())),r=B.fromTag("div",r),e=(N(r,"data-mce-bogus","all"),jr(r,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"}),Qt(e)),t=(kt(r,t),y(e,r),r.dom.innerText);return C(r),t},Ls=(l,a)=>{l.on("BeforeGetContent",t=>{var e;!0===t.selection&&1<=(e=Ns(l)).length&&(e=e,t.preventDefault(),Bs(e).each(e=>{e=("text"===t.format?js:_s)(l,e);t.content=e}))}),l.on("BeforeSetContent",n=>{var e;!0===n.selection&&!0===n.paste&&(e=zs(l),be(e).each(o=>{R(o).each(e=>{var t=d(sa(n.content),e=>"meta"!==z(e)),r=v("table");Da(l)&&1===t.length&&r(t[0])&&(n.preventDefault(),r=B.fromDom(l.getDoc()),r=aa(r),t=Os(o,t[0],r),a.pasteCells(e,t).each(()=>{l.focus()}))})}))})},Ws=(e,t)=>({element:e,offset:t}),Ms=(t,e,r)=>t.property().isText(e)&&0===t.property().getText(e).trim().length||t.property().isComment(e)?r(e).bind(e=>Ms(t,e,r).orThunk(()=>E.some(e))):E.none(),Is=(e,t)=>(e.property().isText(t)?e.property().getText(t):e.property().children(t)).length,Ps=(e,t)=>{var r,t=Ms(e,t,e.query().prevSibling).getOr(t);return!e.property().isText(t)&&0<(r=e.property().children(t)).length?Ps(e,r[r.length-1]):Ws(t,Is(e,t))},Fs=Ps,Hs=t(),Vs=e=>Fs(Hs,e),qs=(r,o)=>{Vr(r)||ll(r).each(e=>{var t=e.value/2;al(r,t,e.unit),al(o,t,e.unit)})},$s=e=>h(e,g(0)),Us=(e,t,r,o,n)=>n(e.slice(0,t)).concat(o).concat(n(e.slice(r))),Gs=(e=n=>(e,t,r,o)=>n(r)?(o=Math.max(o,e[t]-Math.abs(r)),o=Math.abs(o-e[t]),0<=r?o:-o):r)(e=>e<0),Ks=e(k),Ys=()=>{let a=(e,r,t,o)=>{let n=(100+t)/100,l=Math.max(o,(e[r]+t)/n);return h(e,(e,t)=>(t===r?l:e/n)-e)},s=(e,t,r,o,n,l)=>l?a(e,t,o,n):((e,t,r,o,n)=>{o=Gs(e,t,o,n);return Us(e,t,r+1,[o,0],$s)})(e,t,r,o,n);return{resizeTable:(e,t)=>e(t),clampTableDelta:Gs,calcLeftEdgeDeltas:s,calcMiddleDeltas:(e,t,r,o,n,l,a)=>s(e,r,o,n,l,a),calcRightEdgeDeltas:(e,t,r,o,n,l)=>l?a(e,r,o,n):(l=Gs(e,r,o,n),$s(e.slice(0,r)).concat([l])),calcRedestributedWidths:(e,r,o,n)=>{if(n){let t=(r+o)/r;n=h(e,e=>e/t);return{delta:100*t-100,newSizes:n}}return{delta:o,newSizes:e}}}},Js=()=>{let a=(e,t,r,o,n)=>{var l=0<=o?r:t,l=Ks(e,l,o,n);return Us(e,t,r+1,[l,-l],$s)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,o,n)=>n?0<=r?r:(n=ie(e,(e,t)=>e+t-o,0),Math.max(-n,r)):Gs(e,t,r,o),calcLeftEdgeDeltas:a,calcMiddleDeltas:(e,t,r,o,n,l)=>a(e,r,o,n,l),calcRightEdgeDeltas:(e,t,r,o,n,l)=>l?$s(e):(l=o/e.length,h(e,g(l))),calcRedestributedWidths:(e,t,r,o)=>({delta:0,newSizes:e})}},Qs=e=>j.fromTable(e).grid,Xs=v("th"),Zs=e=>fe(e,e=>Xs(e.element)),ei=(e,t)=>e&&t?"sectionCells":e?"section":"cells",ti=e=>{var t="thead"===e.section,r=yr(ri(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:ei(t,r)}:{type:"body"}},ri=e=>{var t=d(e,e=>Xs(e.element));return 0===t.length?E.some("td"):t.length===e.length?E.some("th"):E.none()},oi=(e,t,r)=>x(r(e.element,t),!0,e.isLocked),ni=(e,t)=>e.section!==t?$t(e.element,e.cells,t,e.isNew):e,li=()=>({transformRow:ni,transformCell:(e,t,r)=>{r=r(e.element,t),t="td"!==z(r)?Lt(r,"td"):r;return x(t,e.isNew,e.isLocked)}}),ai=()=>({transformRow:ni,transformCell:oi}),si=()=>({transformRow:(e,t)=>{t="thead"===t?"tbody":t;return ni(e,t)},transformCell:oi}),ii={getTableSectionType:(e,t)=>{var e=j.fromTable(e);switch(e=e,ye(e.all,e=>{e=ti(e);return"header"===e.type?E.from(e.subType):E.none()}).getOr(t)){case"section":return li();case"sectionCells":return ai();case"cells":return si()}},section:li,sectionCells:ai,cells:si,fallback:()=>({transformRow:s,transformCell:oi})},mi=(e,t,r,o)=>{r===o?b(e,t):N(e,t,r)},ci=(e,t,r)=>{we(mr(e,t)).fold(()=>St(e,r),e=>Tt(e,r))},di=(t,r)=>{var e=br(t,r).getOrThunk(()=>{var e=B.fromTag(r,ut(t).dom);return"thead"===r?ci(t,"caption,colgroup",e):"colgroup"===r?ci(t,"caption",e):y(t,e),e});return Et(e),e},ui=(n,e)=>{let r=[],o=[],l=e=>h(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return Et(t),A(e.cells,e=>{e.isNew&&o.push(e.element),mi(e.element,"colspan",e.colspan,1),mi(e.element,"rowspan",e.rowspan,1),y(t,e.element)}),t}),a=e=>u(e,e=>h(e.cells,e=>(mi(e.element,"span",e.colspan,1),e.element)));var t=(e,t)=>{var r,o;0<e.length?(e=e,r=t,o=di(n,r),r=("colgroup"===r?a:l)(e),kt(o,r)):(e=t,br(n,e).each(C))};let s=[],i=[],m=[],c=[];return A(e,e=>{switch(e.section){case"thead":s.push(e);break;case"tbody":i.push(e);break;case"tfoot":m.push(e);break;case"colgroup":c.push(e)}}),t(c,"colgroup"),t(s,"thead"),t(i,"tbody"),t(m,"tfoot"),{newRows:r,newCells:o}},fi=e=>h(e,e=>{let r=Nt(e.element);return A(e.cells,e=>{var t=Bt(e.element);mi(t,"colspan",e.colspan,1),mi(t,"rowspan",e.rowspan,1),y(r,t)}),r}),gi=(e,t)=>h(e,e=>Yo(e,t)),hi=(e,t)=>e[t],pi=(e,t)=>{if(0===e.length)return 0;let r=e[0];return de(e,e=>!t(r.element,e.element)).getOr(e.length)},vi=(e,t,r,o)=>{var n=hi(e,t),l="colgroup"===n.section;return{colspan:pi(n.cells.slice(r),o),rowspan:l?1:pi(gi(e.slice(t),r),o)}},bi=(n,l)=>{let a=h(n,e=>h(e.cells,Z));return h(n,(e,o)=>{var t=u(e.cells,(e,t)=>{var r;return!1===a[o][t]?(r=vi(n,o,t,l),((e,r,o,n)=>{for(let t=e;t<e+o;t++)for(let e=r;e<r+n;e++)a[t][e]=!0})(o,t,r.rowspan,r.colspan),[Ft(e.element,r.rowspan,r.colspan,e.isNew)]):[]});return qt(e.element,t,e.section,e.isNew)})},wi=(o,n,l)=>{let a=[];A(o.colgroups,e=>{var t=[];for(let e=0;e<o.grid.columns;e++){var r=j.getColumnAt(o,e).map(e=>x(e.element,l,!1)).getOrThunk(()=>x(n.colGap(),!0,!1));t.push(r)}a.push($t(e.element,t,"colgroup",l))});for(let t=0;t<o.grid.rows;t++){var r=[];for(let e=0;e<o.grid.columns;e++){var s=j.getAt(o,t,e).map(e=>x(e.element,l,e.isLocked)).getOrThunk(()=>x(n.gap(),!0,!1));r.push(s)}var e=o.all[t],e=$t(e.element,r,e.section,l);a.push(e)}return a},yi=e=>bi(e,w),Ci=(e,t)=>ye(e.all,e=>ce(e.cells,e=>w(t,e.element))),xi=(t,e,r)=>{e=h(e.selection,e=>Qr(e).bind(e=>Ci(t,e)).filter(r)),e=Cr(e);return Tr(0<e.length,e)},Ti=(n=(i,t,m,c,d)=>(n,e,o,l)=>{let a=j.fromTable(n),s=E.from(null==l?void 0:l.section).getOrThunk(ii.fallback);return t(a,e).map(e=>{t=a,r=o;var t=wi(t,r,!1),r=i(t,e,w,d(o),s),t=en(r.grid);return{info:e,grid:yi(r.grid),cursor:r.cursor,lockedColumns:t}}).bind(e=>{var t=ui(n,e.grid),r=E.from(null==l?void 0:l.sizing).getOrThunk(()=>El.getTableSize(n)),o=E.from(null==l?void 0:l.resize).getOrThunk(Js);return m(n,e.grid,e.info,{sizing:r,resize:o,section:s}),c(n),b(n,Xo),0<e.lockedColumns.length&&N(n,Xo,e.lockedColumns.join(",")),E.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},(e,t)=>xi(e,t,k).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Si=(e,t)=>xi(e,t,k),Ri=(e,t)=>xi(e,t,e=>!e.isLocked),Di=(e,t)=>Ci(e,t).exists(e=>!e.isLocked),Oi=(t,e)=>fe(e,e=>Di(t,e)),ki=(e,r,o,n)=>{var l=_(e).rows;let a=!0;for(let t=0;t<l.length;t++)for(let e=0;e<Jo(l[0]);e++){var s=l[t],i=Yo(s,e),m=o(i.element,r);m&&!a?Uo(s,e,x(n(),!0,i.isLocked)):m&&(a=!1)}return e},Ei=(e,r)=>ie(e,(e,t)=>c(e,e=>r(e.element,t.element))?e:e.concat([t]),[]),Ai=(e,n,l,a)=>(0<n&&n<e[0].cells.length&&A(e,e=>{var t=e.cells[n-1];let r=0;for(var o=a();e.cells.length>n+r&&l(t.element,e.cells[n+r].element);)Uo(e,n+r,x(o,!0,e.cells[n+r].isLocked)),r++}),e),zi=(e,t,a,s)=>{let i=_(e).rows;var r;return 0<t&&t<i.length&&(r=i[t-1].cells,r=Ei(r,a),A(r,n=>{let l=E.none();for(let e=t;e<i.length;e++)for(let o=0;o<Jo(i[0]);o++){let t=i[e],r=Yo(t,o);a(r.element,n.element)&&(l=l.isNone()?E.some(s()):l).each(e=>{Uo(t,o,x(e,!0,r.isLocked))})}})),e},Ni=r=>{var e=e=>e(r),t=g(r),o=()=>n;let n={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:k,isError:Z,map:e=>_i.value(e(r)),mapError:o,bind:e,exists:e,forall:e,getOr:t,or:o,getOrThunk:t,orThunk:o,getOrDie:t,each:e=>{e(r)},toOptional:()=>E.some(r)};return n},Bi=r=>{var e,t=()=>o;let o={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:Z,isError:k,map:t,mapError:e=>_i.error(e(r)),bind:t,exists:Z,forall:k,getOr:s,or:s,getOrThunk:X,orThunk:X,getOrDie:(e=String(r),()=>{throw new Error(e)}),each:O,toOptional:E.none};return o},_i={value:Ni,error:Bi,fromOption:(e,t)=>e.fold(()=>Bi(t),Ni)},ji=(e,t,r)=>{var o;return e.row>=t.length||e.column>Jo(t[0])?_i.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column):(e=(t=t.slice(e.row))[0].cells.slice(e.column),o=Jo(r[0]),r=r.length,_i.value({rowDelta:t.length-r,colDelta:e.length-o}))},Li=(e,t)=>({rowDelta:0,colDelta:Jo(e[0])-Jo(t[0])}),Wi=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Mi=(e,t,r,o)=>{let n="colgroup"===t.section?r.col:r.cell;return ne(e,e=>x(n(),!0,o(e)))},Ii=(e,t,r,o)=>{let n=e[e.length-1];return e.concat(ne(t,()=>{var e="colgroup"===n.section?r.colgroup:r.row,e=Qo(n,e,s),t=Mi(e.cells.length,e,r,e=>ze(o,e.toString()));return Go(e,t)}))},Pi=(e,r,o,n)=>h(e,e=>{var t=Mi(r,e,o,Z);return qo(e,n,t)}),Fi=(e,n,t)=>h(e,o=>ie(t,(e,t)=>{var r=Mi(1,o,n,k)[0];return $o(e,t,r)},o)),Hi=(e,t,r)=>{var o=t.colDelta<0?Pi:s,n=t.rowDelta<0?Ii:s,l=en(e);let a=Jo(e[0]);l=c(l,e=>e===a-1),o=o(e,Math.abs(t.colDelta),r,l?a-1:a),e=en(o);return n(o,Math.abs(t.rowDelta),r,he(e,k))},Vi=(e,t,r,o)=>{var o=f(o,Yo(e[t],r).element),n=e[t];return 1<e.length&&1<Jo(n)&&(0<r&&o(D(n,r-1))||r<n.cells.length-1&&o(D(n,r+1))||0<t&&o(D(e[t-1],r))||t<e.length-1&&o(D(e[t+1],r)))},qi=(e,o,n,l,a,t)=>{var s,i,m=e.row,c=e.column,d=m+n.length,u=c+Jo(n[0])+t.length,f=he(t,k);for(let r=m;r<d;r++){let t=0;for(let e=c;e<u;e++)f[e]?t++:(Vi(o,r,e,a)&&ki(o,D(o[r],e),a,l.cell),s=e-c-t,i=(s=Yo(n[r-m],s)).element,i=l.replace(i),Uo(o[r],e,x(i,!0,s.isLocked)))}return o},$i=(t,e,r)=>{var o=Jo(e[0]),e=_(e).cols.length+t.row,n=ne(o-t.column,e=>e+t.column);return{row:e,column:ce(n,t=>fe(r,e=>e!==t)).getOr(o-1)}},Ui=(t,r,e)=>d(e,e=>e>=t.column&&e<=Jo(r[0])+t.column),Gi=(r,e,t,o,n)=>{Ai(e,r,n,o.cell);n=Wi(t,e);let l=Hi(t,n,o);t=Wi(e,l),n=Hi(e,t,o);return h(n,(e,t)=>qo(e,r,l[t].cells))},Ki=(e,t,r,o,n)=>{zi(t,e,n,o.cell);var n=en(t),l=Li(t,r),l={...l,colDelta:l.colDelta-n.length},n=Hi(t,l,o),{cols:l,rows:a}=_(n),n=en(n),t=Li(r,t),t={...t,colDelta:t.colDelta+n.length},r=Fi(r,o,n),n=Hi(r,t,o);return[...l,...a.slice(0,e),...n,...a.slice(e,a.length)]},Yi=(e,t,r,o)=>Qo(e,e=>o(e,r),t),Ji=(e,r,t,o,n)=>{let{rows:l,cols:a}=_(e);var e=l.slice(0,r),s=l.slice(r),t=Yi(l[t],(e,t)=>0<r&&r<l.length&&o(D(l[r-1],t),D(l[r],t))?Yo(l[r],t):x(n(e.element,o),!0,e.isLocked),o,n);return[...a,...e,t,...s]},Qi=(e,t,r,o,n,l,a)=>"colgroup"!==r&&o?Yo(e,t):(r=Yo(e,n),x(a(r.element,l),!0,!1)),Xi=(e,r,o,n,l)=>h(e,e=>{var t=0<r&&r<Jo(e)&&n(D(e,r-1),D(e,r)),t=Qi(e,r,e.section,t,o,n,l);return $o(e,r,t)}),Zi=(e,t,r,o)=>void 0!==D(e[t],r)&&0<t&&o(D(e[t-1],r),D(e[t],r)),em=(e,t,r)=>0<t&&r(D(e,t-1),D(e,t)),tm=(e,t,r,o)=>Zi(e,t,r,o)||em(e[t],r,o),rm=(e,o)=>fe(o,s)&&Zs(e.cells)?k:(e,t,r)=>!("th"===z(e.element)&&o[r]),om=(e,o)=>fe(o,s)&&Zs(e)?k:(e,t,r)=>!("th"===z(e.element)&&o[t]),nm=(e,t,r,o)=>{var n=e=>("row"===e?qr:Vr)(t)?e+"group":e;return e?Xs(t)?n(r):null:o&&Xs(t)?n("row"===r?"col":"row"):null},lm=(o,n)=>(e,t,r)=>E.some(nm(o,e.element,"col",n[r])),am=(r,o)=>(e,t)=>E.some(nm(r,e.element,"row",o[t])),sm=(e,t,r)=>x(r(e.element,t),!0,e.isLocked),im=(e,n,l,a,s,i,m)=>h(e,(e,o)=>Ko(e,(e,r)=>{if(t=e,c(n,e=>l(t.element,e.element))){let t=m(e,o,r)?s(e,l,a):e;return i(t,o,r).each(e=>{tt(t.element,{scope:E.from(e)})}),t}return e;var t})),mm=(r,o,n)=>u(r,(e,t)=>tm(r,t,o,n)?[]:[Yo(e,o)]),cm=(r,o,n)=>{var e=r[o];return u(e.cells,(e,t)=>tm(r,o,t,n)?[]:[e])},dm=(e,t,r,o,n)=>{let l=_(e).rows;var t=u(t,e=>mm(l,e,o)),a=h(l,e=>Zs(e.cells)),s=om(t,a),r=am(r,a);return im(e,t,o,n,sm,r,s)},um=(e,t,r,o)=>{let n=_(e).rows;t=h(t,e=>Yo(n[e.row],e.column));return im(e,t,r,o,sm,E.none,k)};const fm=l=>{if(!P(l))throw new Error("cases must be an array");if(0===l.length)throw new Error("there must be at least one case");let a=[],s={};return A(l,(e,t)=>{var r=Ce(e);if(1!==r.length)throw new Error("one and only one name per case");let o=r[0],n=e[o];if(void 0!==s[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!P(n))throw new Error("case arguments must be an array");a.push(o),s[o]=(...r)=>{var e=r.length;if(e!==n.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+n.length+" ("+n+"), got "+e);return{fold:(...e)=>{if(e.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{let t=Ce(e);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(fe(a,e=>i(t,e)))return e[o].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "))},log:e=>{console.log(e,{constructors:a,constructor:o,params:r})}}}}),s};let gm={...fm([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},hm=(e,t)=>0===e.length?gm.none():1===e.length?gm.only(0):0===t?gm.left(0,1):t===e.length-1?gm.right(t-1,t):0<t&&t<e.length-1?gm.middle(t-1,t,t+1):gm.none(),pm=(e,t,o,n,l)=>{let a=e.slice(0);e=hm(e,t),t=g(h(a,g(0)));return e.fold(t,e=>n.singleColumnWidth(a[e],o),(e,t)=>l.calcLeftEdgeDeltas(a,e,t,o,n.minCellWidth(),n.isRelative),(e,t,r)=>l.calcMiddleDeltas(a,e,t,r,o,n.minCellWidth(),n.isRelative),(e,t)=>l.calcRightEdgeDeltas(a,e,t,o,n.minCellWidth(),n.isRelative))},vm=(t,r,o)=>{let n=0;for(let e=t;e<r;e++)n+=void 0!==o[e]?o[e]:0;return n},bm=(e,r)=>{e=j.justCells(e);return h(e,e=>{var t=vm(e.column,e.column+e.colspan,r);return{element:e.element,width:t,colspan:e.colspan}})},wm=(e,r)=>{e=j.justColumns(e);return h(e,(e,t)=>({element:e.element,width:r[t],colspan:e.colspan}))},ym=(e,r)=>h(e.all,(e,t)=>({element:e.element,height:r[t]})),Cm=e=>se(e,(e,t)=>e+t,0),xm=(e,t)=>(j.hasColumns(e)?wm:bm)(e,t),Tm=(e,t,r)=>{e=xm(e,t);A(e,e=>{r.setElementWidth(e.element,e.width)})},Sm=(e,t,r,o,n)=>{e=j.fromTable(e),t=n.getCellDelta(t);let l=n.getWidths(e,n);var a=r===e.grid.columns-1,t=o.clampTableDelta(l,r,t,n.minCellWidth(),a),r=pm(l,r,t,n,o),r=h(r,(e,t)=>e+l[t]);Tm(e,r,n),o.resizeTable(n.adjustTableWidth,t,a)},Rm=(e,r,o)=>{var t=j.fromTable(e),n=Tl(t,e),n=h(n,(e,t)=>o===t?Math.max(r+e,Gr()):e),l=ym(t,n),l=(A(l,e=>{Un(e.element,e.height)}),A(j.justCells(t),e=>{Gn(e.element)}),Cm(n));Un(e,l)},Dm=e=>ie(e,(e,t)=>c(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),Om=v("col"),km=v("colgroup"),Em=e=>"tr"===z(e)||km(e),Am=e=>ot(e,"scope").map(e=>e.substr(0,3));const zm=(t,r=e=>({element:e,colspan:Fr(e,"colspan",1),rowspan:Fr(e,"rowspan",1)}))=>{let o=e=>Om(e.element)?t.col(e):t.cell(e),n=e=>km(e.element)?t.colgroup(e):t.row(e),l=e=>{var t;return Em(e)?n({element:e}):(e=e,t=o(r(e)),a=E.some({item:e,replacement:t}),t)},a=E.none();return{getOrInit:(t,r)=>a.fold(()=>l(t),e=>r(t,e.item)?e.replacement:l(t))}},Nm=l=>r=>{let o=[],e=(t,r)=>ce(o,e=>r(e.item,t)),n=e=>{var t=r.replace(e,l,"td"===l?{scope:null}:{});return o.push({item:e,sub:t}),t};return{replaceOrInit:(r,o)=>{if(Em(r)||Om(r))return r;{let t=r;return e(t,o).fold(()=>n(t),e=>o(r,e.item)?e.sub:n(t))}}}},Bm=o=>({unmerge:r=>{let e=Am(r);return e.each(e=>N(r,"scope",e)),()=>{let t=o.cell({element:r,colspan:1,rowspan:1});return Ir(t,"width"),Ir(r,"width"),e.each(e=>N(t,"scope",e)),t}},merge:t=>(Ir(t[0],"width"),(()=>{var e=Cr(h(t,Am));if(0===e.length)return E.none();{let t=e[0],r=["row","col"];return c(e,e=>e!==t&&i(r,e))?E.none():E.from(t)}})().fold(()=>b(t[0],"scope"),e=>N(t[0],"scope",e+"group")),g(t[0]))});let _m=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jm=(e,t)=>{e=e.property().name(t);return i(["ol","ul"],e)},Lm=(e,t)=>{e=e.property().name(t);return i(_m,e)},Wm=(e,t)=>i(["br","img","hr","input"],e.property().name(t)),Mm=t(),Im=e=>Lm(Mm,e),Pm=e=>jm(Mm,e),Fm=e=>Wm(Mm,e),Hm=e=>{let n=v("br"),l=e=>"li"===z(e)||fr(e,Pm).isSome(),a=e=>bt(e).map(e=>!!Im(e)||!!Fm(e)&&"img"!==z(e)).getOr(!1);var t=0===(t=u(e,e=>{var o,t,r=wt(e);return t=r,fe(t,e=>n(e)||Je(e)&&0===Il(e).trim().length)?[]:r.concat((o=e,Kl(o).bind(t=>{let r=a(t);return gt(t).map(e=>!0===r||l(e)||n(t)||Im(e)&&!w(o,e)?[]:[B.fromTag("br")])}).getOr([])))})).length?[B.fromTag("br")]:t;Et(e[0]),kt(e[0],t)},Vm=e=>za(e,!0),qm=(o=e=>{0===Xr(e).length&&C(e)},(e,t)=>({grid:e,cursor:t})),$m=e=>ye(e,e=>ye(e.cells,e=>{e=e.element;return Tr(Vm(e),e)})),Um=(e,t,r)=>{let o,n,l=_(e).rows;return E.from(null==(n=null==(o=l[t])?void 0:o.cells[r])?void 0:n.element).filter(Vm).orThunk(()=>$m(l))},m=(e,t,r)=>{t=Um(e,t,r);return qm(e,t)},Gm=e=>ie(e,(e,t)=>c(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row);var Km=(e=(a,s)=>(e,t,r,o,n)=>{var l=Gm(t),e=((e,t,r,o,n,l,a)=>{let{cols:s,rows:i}=_(e);var e=i[t[0]],m=u(t,e=>cm(i,e,n)),c=h(e.cells,(e,t)=>Zs(mm(i,t,n)));let d=[...i];A(t,e=>{d[e]=a.transformRow(i[e],r)});t=[...s,...d],e=rm(e,c),o=lm(o,c);return im(t,m,n,l,a.transformCell,o,e)})(e,h(l,e=>e.row),a,s,r,o.replaceOrInit,n);return m(e,t[0].row,t[0].column)})("thead",!0),Ym=e("tbody",!1),e=e("tfoot",!1);let Jm=(e,t,r)=>{e=lo(e,r.section),r=j.generate(e);return wi(r,t,!0)};var Qm=(e,t,r,o)=>{var n;t=t,o=o.sizing,t=j.generate(t),n=o.getWidths(t,o),Tm(t,n,o)},Xm=(e,t,r,o)=>((e,t,r,o)=>{var e=j.generate(e),n=r.getWidths(e,r),l=r.pixelWidth(),{newSizes:o,delta:n}=o.calcRedestributedWidths(n,l,t.pixelDelta,r.isRelative);Tm(e,o,r),r.adjustTableWidth(n)})(t,r,o.sizing,o.resize);let Zm=(e,t)=>c(t,e=>0===e.column&&e.isLocked),ec=(t,e)=>c(e,e=>e.column+e.colspan>=t.grid.columns&&e.isLocked),tc=(e,t)=>{let r=ln(e);e=Dm(t);return ie(e,(e,t)=>e+r[t.column].map(Fo).getOr(0),0)};var rc=r=>(t,e)=>Si(t,e).filter(e=>!(r?Zm:ec)(t,e)).map(e=>({details:e,pixelDelta:tc(t,e)})),oc=r=>(t,e)=>Ti(t,e).filter(e=>!(r?Zm:ec)(t,e.cells)),nc=Nm("th"),lc=Nm("td");let ac=n((e,t,r,o)=>{let n=t[0].row;var l=Gm(t),l=se(l,(e,t)=>({grid:Ji(e.grid,n,t.row+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return m(l,n,t[0].column)},Si,O,O,zm),sc=n((e,t,r,o)=>{var n=Gm(t),l=n[n.length-1];let a=l.row+l.rowspan;l=se(n,(e,t)=>Ji(e,a,t.row,r,o.getOrInit),e);return m(l,a,t[0].column)},Si,O,O,zm),ic=n((e,t,r,o)=>{var t=t.details,n=Dm(t);let l=n[0].column;n=se(n,(e,t)=>({grid:Xi(e.grid,l,t.column+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return m(n,t[0].row,l)},rc(!0),Xm,O,zm),mc=n((e,t,r,o)=>{var t=t.details,n=t[t.length-1];let l=n.column+n.colspan;n=Dm(t),n=se(n,(e,t)=>Xi(e,l,t.column,r,o.getOrInit),e);return m(n,t[0].row,l)},rc(!1),Xm,O,zm),cc=n((e,t,r,o)=>{var n,t=Dm(t.details),e=(e=e,n=h(t,e=>e.column),u(e,e=>{var t=e.cells,t=se(n,(e,t)=>0<=t&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,t);return 0<t.length?[$t(e.element,t,e.section,e.isNew)]:[]})),l=0<e.length?e[0].cells.length-1:0;return m(e,t[0].row,Math.min(t[0].column,l))},(t,e)=>Ri(t,e).map(e=>({details:e,pixelDelta:-tc(t,e)})),Xm,o,zm),dc=n((e,t,r,o)=>{var n=Gm(t),e=((e,t,r)=>{var{rows:e,cols:o}=_(e);return[...o,...e.slice(0,t),...e.slice(r+1)]})(e,n[0].row,n[n.length-1].row),n=Math.max(_(e).rows.length-1,0);return m(e,Math.min(t[0].row,n),t[0].column)},Si,O,o,zm),uc=n((e,t,r,o)=>{var n=Dm(t),n=h(n,e=>e.column),e=dm(e,n,!0,r,o.replaceOrInit);return m(e,t[0].row,t[0].column)},Ri,O,O,nc),fc=n((e,t,r,o)=>{var n=Dm(t),n=h(n,e=>e.column),e=dm(e,n,!1,r,o.replaceOrInit);return m(e,t[0].row,t[0].column)},Ri,O,O,lc),gc=n(Km,Si,O,O,nc),hc=n(Ym,Si,O,O,lc),pc=n(e,Si,O,O,lc),vc=n((e,t,r,o)=>{e=um(e,t,r,o.replaceOrInit);return m(e,t[0].row,t[0].column)},Ri,O,O,nc),bc=n((e,t,r,o)=>{e=um(e,t,r,o.replaceOrInit);return m(e,t[0].row,t[0].column)},Ri,O,O,lc),wc=n((e,t,r,o)=>{var n=t.cells,e=(Hm(n),((e,r,o)=>{var n=_(e).rows;if(0!==n.length)for(let t=r.startRow;t<=r.finishRow;t++)for(let e=r.startCol;e<=r.finishCol;e++){var l=n[t],a=Yo(l,e).isLocked;Uo(l,e,x(o(),!1,a))}return e})(e,t.bounds,o.merge(n)));return qm(e,E.from(n[0]))},(t,e)=>e.mergable.filter(e=>Oi(t,e.cells)),Qm,O,Bm),yc=n((e,t,r,o)=>{e=se(t,(e,t)=>ki(e,t,r,o.unmerge(t)),e);return qm(e,E.from(t[0]))},(t,e)=>e.unmergable.filter(e=>Oi(t,e)),Qm,O,Bm),Cc=n((e,t,r,o)=>{var n=((e,t)=>{e=j.fromTable(e);return wi(e,t,!0)})(t.clipboard,t.generators);return((e,r,t,o,n)=>{var l=en(r);let a=$i(e,r,l),s=_(t).rows,i=Ui(a,s,l);return ji(a,r,s).map(e=>{var e={...e,colDelta:e.colDelta-i.length},e=Hi(r,e,o),t=en(e),t=Ui(a,s,t);return qi(a,e,s,o,n,t)})})({row:t.row,column:t.column},e,n,t.generators,r).fold(()=>qm(e,E.some(t.element)),e=>m(e,t.row,t.column))},(t,r)=>Qr(r.element).bind(e=>Ci(t,e).map(e=>({...e,generators:r.generators,clipboard:r.clipboard}))),Qm,O,zm),xc=n((e,t,r,o)=>{var n=_(e).rows,l=t.cells[0].column,n=n[t.cells[0].row],n=Jm(t.clipboard,t.generators,n),l=Gi(l,e,n,t.generators,r);return m(l,t.cells[0].row,t.cells[0].column)},oc(!0),O,O,zm),Tc=n((e,t,r,o)=>{var n=_(e).rows,l=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,n=n[t.cells[0].row],n=Jm(t.clipboard,t.generators,n),e=Gi(l,e,n,t.generators,r);return m(e,t.cells[0].row,l)},oc(!1),O,O,zm),Sc=n((e,t,r,o)=>{var n=_(e).rows,l=t.cells[0].row,n=n[l],n=Jm(t.clipboard,t.generators,n),l=Ki(l,e,n,t.generators,r);return m(l,t.cells[0].row,t.cells[0].column)},Ti,O,O,zm),Rc=n((e,t,r,o)=>{var n=_(e).rows,l=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,n=n[t.cells[0].row],n=Jm(t.clipboard,t.generators,n),e=Ki(l,e,n,t.generators,r);return m(e,l,t.cells[0].column)},Ti,O,O,zm),Dc=(e,t)=>{let n=j.fromTable(e);return Si(n,t).bind(e=>{var t=e[e.length-1];let r=e[0].column,o=t.column+t.colspan;e=ue(h(n.all,e=>d(e.cells,e=>e.column>=r&&e.column<o)));return ri(e)}).getOr("")},Oc=(e,t)=>{e=j.fromTable(e);return Si(e,t).bind(ri).getOr("")},kc=(e,t)=>{let o=j.fromTable(e);return Si(o,t).bind(e=>{var t,r=e[e.length-1],e=e[0].row,r=r.row+r.rowspan,e=o.all.slice(e,r);return r=e,r=h(r,e=>ti(e).type),e=i(r,"header"),t=i(r,"footer"),e||t?(r=i(r,"body"),!e||r||t?e||r||!t?E.none():E.some("footer"):E.some("header")):E.some("body")}).getOr("")},Ec=(e,t)=>e.dispatch("NewRow",{node:t}),Ac=(e,t)=>e.dispatch("NewCell",{node:t}),zc=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},Nc=(e,t,r,o,n)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:o,otherCells:n})},Bc=e=>{e.dispatch("TableSelectionClear")},_c=(e,t,r,o,n)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:o,origin:n})},jc=(e,t,r,o,n)=>{e.dispatch("ObjectResized",{target:t,width:r,height:o,origin:n})},Lc={structure:!1,style:!0},L={structure:!0,style:!1},Wc={structure:!0,style:!0},Mc=(e,t)=>Ca(e)?El.percentageSize(t):xa(e)?El.pixelSize(t):El.getTableSize(t),Ic=(m,c,d)=>{let t=e=>"table"===z(Ba(e));let u=ga(m);var e=wa(m)?O:qs;var r=(l,a,s,i)=>(t,e,o=!1)=>{ja(t);var r=B.fromDom(m.getDoc()),r=la(s,r,u),n={sizing:Mc(m,t),resize:(wa(m)?Ys:Js)(),section:(e=>{switch(pa(m)){case"section":return ii.section();case"sectionCells":return ii.sectionCells();case"cells":return ii.cells();default:return ii.getTableSectionType(e,"section")}})(t)};return a(t)?l(t,e,r,n).bind(e=>{c.refresh(t.dom),A(e.newRows,e=>{Ec(m,e.dom)}),A(e.newCells,e=>{Ac(m,e.dom)});r=t;var r,e=e.cursor.fold(()=>{var e=Xr(r);return be(e).filter(rr).map(e=>{d.clearSelectedCells(r.dom);var t=m.dom.createRng();return t.selectNode(e.dom),m.selection.setRng(t),N(e,"data-mce-selected","1"),t})},e=>{var e=Vs(e),t=m.dom.createRng();return t.setStart(e.element.dom,e.offset),t.setEnd(e.element.dom,e.offset),m.selection.setRng(t),d.clearSelectedCells(r.dom),E.some(t)});return rr(t)&&(ja(t),o||zc(m,t.dom,i)),e.map(e=>({rng:e,effect:i}))}):E.none()},o=r(dc,e=>!t(m)||1<Qs(e).rows,O,L),n=r(cc,e=>!t(m)||1<Qs(e).columns,O,L),l=r(ac,k,O,L),a=r(sc,k,O,L),s=r(ic,k,e,L),e=r(mc,k,e,L),i=r(wc,k,O,L),f=r(yc,k,O,L),g=r(xc,k,O,L),h=r(Tc,k,O,L),p=r(Sc,k,O,L),v=r(Rc,k,O,L),b=r(Cc,k,O,Wc),w=r(vc,k,O,L),y=r(bc,k,O,L),C=r(uc,k,O,L),x=r(fc,k,O,L),T=r(gc,k,O,L),S=r(hc,k,O,L),r=r(pc,k,O,L),R=Oc,D=Dc;return{deleteRow:o,deleteColumn:n,insertRowsBefore:l,insertRowsAfter:a,insertColumnsBefore:s,insertColumnsAfter:e,mergeCells:i,unmergeCells:f,pasteColsBefore:g,pasteColsAfter:h,pasteRowsBefore:p,pasteRowsAfter:v,pasteCells:b,makeCellsHeader:w,unmakeCellsHeader:y,makeColumnsHeader:C,unmakeColumnsHeader:x,makeRowsHeader:T,makeRowsBody:S,makeRowsFooter:r,getTableRowType:kc,getTableCellType:R,getTableColType:D}},Pc=(e,t,r)=>{var o=Fr(e,t,1);1===r||o<=1?b(e,t):N(e,t,Math.min(r,o))},Fc=(r,o)=>e=>{var t=e.column+e.colspan-1;return r<=t&&e.column<o},Hc=(e,t,r)=>{var o;return j.hasColumns(e)?(e=d(j.justColumns(e),Fc(t,r)),e=h(e,e=>{e=Bt(e.element);return Pc(e,"span",r-t),e}),o=B.fromTag("colgroup"),kt(o,e),[o]):[]},Vc=(e,r,o)=>h(e.all,e=>{var e=d(e.cells,Fc(r,o)),e=h(e,e=>{e=Bt(e.element);return Pc(e,"colspan",o-r),e}),t=B.fromTag("tr");return kt(t,e),t}),qc=(e,t)=>{let o=j.fromTable(e);return Ri(o,t).map(e=>{var t=e[e.length-1],e=e[0].column,t=t.column+t.colspan,r=Hc(o,e,t),e=Vc(o,e,t);return[...r,...e]})},$c=(e,t,r)=>{let o=j.fromTable(e);return Si(o,t).bind(e=>{var t=wi(o,r,!1),t=_(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=u(t,e=>{var t=d(e.cells,e=>!e.isLocked);return 0<t.length?[{...e,cells:t}]:[]}),t=yi(e);return Tr(0<t.length,t)}).map(e=>fi(e))},Uc=fm([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Gc=(e,t,r)=>{var e=r.substring(0,r.length-e.length),o=parseFloat(e);return e===o.toString()?t(o):Uc.invalid(r)},Kc={...Uc,from:e=>kr(e,"%")?Gc("%",Uc.percent,e):kr(e,"px")?Gc("px",Uc.pixels,e):Uc.invalid(e)},Yc=(e,t)=>h(e,e=>Kc.from(e).fold(()=>e,e=>e/t*100+"%",e=>e+"%")),Jc=(e,t,r)=>{let o=r/t;return h(e,e=>Kc.from(e).fold(()=>e,e=>e*o+"px",e=>e/100*r+"px"))},Qc=(e,t)=>{e=e.fold(()=>g(""),e=>{e/=t;return g(e+"px")},()=>{var e=100/t;return g(e+"%")});return ne(t,e)},Xc=(e,t,r)=>e.fold(()=>t,e=>Jc(t,r,e),e=>Yc(t,r)),Zc=(e,t,r)=>{r=Kc.from(r),r=fe(e,e=>"0px"===e)?Qc(r,e.length):Xc(r,e,t);return od(r)},ed=(e,t)=>0===e.length?t:se(e,(e,t)=>Kc.from(t).fold(g(0),s,s)+e,0),td=(e,t)=>{var r=Math.floor(e);return{value:r+t,remainder:e-r}},rd=(e,t)=>Kc.from(e).fold(g(e),e=>e+t+"px",e=>e+t+"%"),od=e=>{var t;return 0===e.length?e:(t=(e=se(e,(e,t)=>{var r=Kc.from(t).fold(()=>({value:t,remainder:0}),e=>td(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0})).output).slice(0,t.length-1).concat([rd(t[t.length-1],Math.round(e.remainder))])},nd=Kc.from,ld=(r,e,o)=>{A(e,e=>{var t=r.slice(e.column,e.colspan+e.column),t=ed(t,Ur());S(e.element,"width",t+o)})},ad=(r,e,o)=>{A(e,(e,t)=>{t=ed([r[t]],Ur());S(e.element,"width",t+o)})},sd=(r,e,t)=>{A(t,e=>{Ir(e.element,"height")}),A(e,(e,t)=>{S(e.element,"height",r[t])})},id=e=>nd(e).fold(g("px"),g("px"),g("%")),md=(n,e,t)=>{let l=j.fromTable(n),o=l.all,a=j.justCells(l),s=j.justColumns(l);e.each(e=>{var t=id(e),r=Po(n),o=wl(l,n),o=Zc(o,r,e);j.hasColumns(l)?ad(o,s,t):ld(o,a,t),S(n,"width",e)}),t.each(e=>{var t=fn(n),r=Sl(l,n),r=Zc(r,t,e);sd(r,o,a),S(n,"height",e)})},cd=e=>el(e).exists(e=>In.test(e)),dd=e=>el(e).exists(e=>Pn.test(e)),ud=e=>el(e).isNone(),fd=e=>{b(e,"width"),b(e,"height")},gd=e=>{var t=ml(e);md(e,E.some(t),E.none()),fd(e)},hd=e=>{var t=sl(e);md(e,E.some(t),E.none()),fd(e)},pd=e=>{var t=il(e);md(e,E.none(),E.some(t)),fd(e)},vd=e=>{Ir(e,"width");var t=Zr(e),t=0<t.length?t:Xr(e);A(t,e=>{Ir(e,"width"),fd(e)}),fd(e)},bd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},wd=()=>B.fromTag("th"),yd=()=>B.fromTag("td"),Cd=()=>B.fromTag("col"),xd=(t,r,o,n)=>{var l=B.fromTag("tr");for(let e=0;e<t;e++){var a=(n<r||e<o?wd:yd)();e<o&&N(a,"scope","row"),n<r&&N(a,"scope","col"),y(a,B.fromTag("br")),y(l,a)}return l},Td=e=>{let t=B.fromTag("colgroup");return ne(e,()=>y(t,Cd())),t},Sd=(e,t,r,o)=>ne(e,e=>xd(t,r,o,e)),Rd=(e,t,r,o,n,l=bd)=>{var a=B.fromTag("table"),s="cells"!==n,l=(jr(a,l.styles),et(a,l.attributes),l.colGroups&&y(a,Td(t)),Math.min(e,r)),i=(s&&0<r&&(i=B.fromTag("thead"),y(a,i),n="sectionCells"===n?l:0,n=Sd(r,t,n,o),kt(i,n)),B.fromTag("tbody")),n=(y(a,i),s?e-l:e),l=s?0:r,e=Sd(n,t,l,o);return kt(i,e),a},Dd=e=>e.dom.innerHTML,Od=e=>{var t=B.fromTag("div"),e=B.fromDom(e.dom.cloneNode(!0));return y(t,e),Dd(t)},kd=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Ed=(e,t)=>{wr(t,"td,th").each(f(kd,e))},Ad=(t,e)=>{A(cr(e,"tr"),e=>{Ec(t,e.dom),A(cr(e,"th,td"),e=>{Ac(t,e.dom)})})},zd=e=>M(e)&&-1!==e.indexOf("%"),Nd=(t,r,o,n,l)=>{let a=ka(t),s={styles:a,attributes:Oa(t),colGroups:Ea(t)};return t.undoManager.ignore(()=>{var e=Rd(o,r,l,n,pa(t),s),e=(N(e,"data-mce-id","__mce"),Od(e));t.insertContent(e),t.addVisual()}),wr(Ba(t),'table[data-mce-id="__mce"]').map(e=>(xa(t)?hd(e):Ta(t)?vd(e):(Ca(t)||zd(a.width))&&gd(e),ja(e),b(e,"data-mce-id"),Ad(t,e),Ed(t,e),e.dom)).getOrNull()},Bd=(e,t,r,o={})=>{var n=e=>G(e)&&0<e;return n(t)&&n(r)?(n=o.headerRows||0,o=o.headerColumns||0,Nd(e,r,t,o,n)):(console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null)};var _d=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let jd=(rc="x-tinymce/dom-table-")+"rows",Ld=rc+"columns",Wd=e=>{e=_d.FakeClipboardItem(e);_d.write([e])},Md=t=>{var e=null!=(e=_d.read())?e:[];return ye(e,e=>E.from(e.getType(t)))},Id=e=>{Md(e).isSome()&&_d.clear()},Pd=e=>{e.fold(Hd,e=>Wd({[jd]:e}))},Fd=()=>Md(jd),Hd=()=>Id(jd),Vd=e=>{e.fold($d,e=>Wd({[Ld]:e}))},qd=()=>Md(Ld),$d=()=>Id(Ld),Ud=e=>Es(La(e),_a(e)).filter(Va),Gd=e=>As(La(e),_a(e)).filter(Va),Kd=(l,t)=>{let o=_a(l);let a=e=>R(e,o),s=r=>Gd(l).bind(t=>a(t).map(e=>r(e,t)));let i=e=>{l.focus()},n=(r,o=!1)=>s((e,t)=>{t=Ds(zs(l),e,t);r(e,t,o).each(i)}),e=()=>s((e,t)=>{var t=Ds(zs(l),e,t),r=la(O,B.fromDom(l.getDoc()),E.none());return $c(e,t,r)}),r=()=>s((e,t)=>{t=Ds(zs(l),e,t);return qc(e,t)}),m=(n,e)=>e().each(e=>{let o=h(e,e=>Bt(e));s((e,t)=>{var r=aa(B.fromDom(l.getDoc())),t=ks(zs(l),t,o,r);n(e,t).each(i)})});var c=r=>(e,t)=>Ae(t,"type").each(e=>{n(r(e),t.no_events)});p({mceTableSplitCells:()=>n(t.unmergeCells),mceTableMergeCells:()=>n(t.mergeCells),mceTableInsertRowBefore:()=>n(t.insertRowsBefore),mceTableInsertRowAfter:()=>n(t.insertRowsAfter),mceTableInsertColBefore:()=>n(t.insertColumnsBefore),mceTableInsertColAfter:()=>n(t.insertColumnsAfter),mceTableDeleteCol:()=>n(t.deleteColumn),mceTableDeleteRow:()=>n(t.deleteRow),mceTableCutCol:()=>r().each(e=>{Vd(e),n(t.deleteColumn)}),mceTableCutRow:()=>e().each(e=>{Pd(e),n(t.deleteRow)}),mceTableCopyCol:()=>r().each(e=>Vd(e)),mceTableCopyRow:()=>e().each(e=>Pd(e)),mceTablePasteColBefore:()=>m(t.pasteColsBefore,qd),mceTablePasteColAfter:()=>m(t.pasteColsAfter,qd),mceTablePasteRowBefore:()=>m(t.pasteRowsBefore,Fd),mceTablePasteRowAfter:()=>m(t.pasteRowsAfter,Fd),mceTableDelete:()=>Ud(l).each(e=>{R(e,o).filter(Q(o)).each(e=>{var t=B.fromText("");Tt(e,t),C(e),l.dom.isEmpty(l.getBody())?(l.setContent(""),l.selection.setCursorLocation()):((e=l.dom.createRng()).setStart(t.dom,0),e.setEnd(t.dom,0),l.selection.setRng(e),l.nodeChanged())})}),mceTableCellToggleClass:(e,o)=>{s(e=>{var t=zs(l);let r=fe(t,e=>l.formatter.match("tablecellclass",{value:o},e.dom))?l.formatter.remove:l.formatter.apply;A(t,e=>r("tablecellclass",{value:o},e.dom)),zc(l,e.dom,Lc)})},mceTableToggleClass:(e,t)=>{s(e=>{l.formatter.toggle("tableclass",{value:t},e.dom),zc(l,e.dom,Lc)})},mceTableToggleCaption:()=>{Ud(l).each(r=>{R(r,o).each(t=>{br(t,"caption").fold(()=>{var e=B.fromTag("caption");y(e,B.fromText("Caption")),Rt(t,e,0),l.selection.setCursorLocation(e.dom,0)},e=>{v("caption")(r)&&mt("td",t).each(e=>l.selection.setCursorLocation(e.dom,0)),C(e)}),zc(l,t.dom,L)})})},mceTableSizingMode:(e,t)=>{return r=t,Ud(l).each(e=>{Ta(l)||xa(l)||Ca(l)||R(e,o).each(e=>{"relative"!==r||cd(e)?"fixed"!==r||dd(e)?"responsive"!==r||ud(e)||vd(e):hd(e):gd(e),ja(e),zc(l,e.dom,L)})});var r},mceTableCellType:c(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:c(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:c(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(e,t)=>l.addCommand(t,e)),l.addCommand("mceInsertTable",(e,t)=>{Bd(l,t.rows,t.columns,t.options)}),l.addCommand("mceTableApplyCellStyle",(e,t)=>{let n=e=>"tablecell"+e.toLowerCase().replace("-","");if(I(t)){let o=d(zs(l),Va);0===o.length||(t=Oe(t,(e,t)=>l.formatter.has(n(t))&&M(e)),Be(t))||(p(t,(t,e)=>{let r=n(e);A(o,e=>{""===t?l.formatter.remove(r,{value:null},e.dom,!0):l.formatter.apply(r,{value:t},e.dom)})}),a(o[0]).each(e=>zc(l,e.dom,Lc)))}})},Yd=(n,e)=>{let t=_a(n),r=o=>As(La(n)).bind(r=>R(r,t).map(e=>{var t=Ds(zs(n),e,r);return o(e,t)})).getOr("");p({mceTableRowType:()=>r(e.getTableRowType),mceTableCellType:()=>r(e.getTableCellType),mceTableColType:()=>r(e.getTableColType)},(e,t)=>n.addQueryValueHandler(t,e))},W={before:(Xm=fm([{before:["element"]},{on:["element","offset"]},{after:["element"]}])).before,on:Xm.on,after:Xm.after,cata:(e,t,r,o)=>e.fold(t,r,o),getStart:e=>e.fold(s,s,s)},Jd={create:(e,t)=>({selection:e,kill:t})},Qd=(e,t)=>{e=e.document.createRange();return e.selectNode(t.dom),e},Xd=(e,t)=>{e=e.document.createRange();return Zd(e,t),e},Zd=(e,t)=>e.selectNodeContents(t.dom),eu=(r,e)=>{e.fold(e=>{r.setStartBefore(e.dom)},(e,t)=>{r.setStart(e.dom,t)},e=>{r.setStartAfter(e.dom)})},tu=(r,e)=>{e.fold(e=>{r.setEndBefore(e.dom)},(e,t)=>{r.setEnd(e.dom,t)},e=>{r.setEndAfter(e.dom)})},ru=(e,t,r)=>{e=e.document.createRange();return eu(e,t),tu(e,r),e},ou=(e,t,r,o,n)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(o.dom,n),e},nu=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),lu=e=>{var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?E.some(t).map(nu):E.none()},au=fm([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),su=(e,t,r)=>t(B.fromDom(r.startContainer),r.startOffset,B.fromDom(r.endContainer),r.endOffset),iu=(n,e)=>e.match({domRange:e=>({ltr:g(e),rtl:E.none}),relative:(e,t)=>({ltr:ao(()=>ru(n,e,t)),rtl:ao(()=>E.some(ru(n,t,e)))}),exact:(e,t,r,o)=>({ltr:ao(()=>ou(n,e,t,r,o)),rtl:ao(()=>E.some(ou(n,r,o,e,t)))})}),mu=(e,t)=>{let r=t.ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>au.rtl(B.fromDom(e.endContainer),e.endOffset,B.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>su(e,au.ltr,r)):su(e,au.ltr,r)},cu=(e,t)=>{t=iu(e,t);return mu(e,t)},du=(l,e)=>cu(l,e).match({ltr:(e,t,r,o)=>{var n=l.document.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,o),n},rtl:(e,t,r,o)=>{var n=l.document.createRange();return n.setStart(r.dom,o),n.setEnd(e.dom,t),n}}),uu=(au.ltr,au,{create:(e,t,r,o)=>({start:e,soffset:t,finish:r,foffset:o})}),fu={create:(e,t,r,o)=>({start:W.on(e,t),finish:W.on(r,o)})},gu=(e,t)=>{e=du(e,t);return uu.create(B.fromDom(e.startContainer),e.startOffset,B.fromDom(e.endContainer),e.endOffset)},hu=fu.create,pu=(r,o,e,t,n,l,a)=>w(e,n)&&t===l?E.none():T(e,"td,th",o).bind(t=>T(n,"td,th",o).bind(e=>vu(r,o,t,e,a))),vu=(r,e,o,t,n)=>w(o,t)?E.none():fs(o,t,e).bind(e=>{var t=e.boxes.getOr([]);return 1<t.length?(n(r,t,e.start,e.finish),E.some(Jd.create(E.some(hu(o,0,o,Hl(o))),!0))):E.none()}),bu=(e,t,r,o,n)=>bs(o,e,t,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>(n.clearBeforeUpdate(r),n.selectRange(r,e.boxes,e.start,e.finish),e.boxes)),wu=(e,t)=>({item:e,mode:t}),yu=(e,t,r,o=Cu)=>r.sibling(e,t).map(e=>wu(e,o)),Cu=(e,t,r,o=Cu)=>{e=e.property().children(t);return r.first(e).map(e=>wu(e,o))},xu=[{current:o=(e,t,r,o=yu)=>e.property().parent(t).map(e=>wu(e,o)),next:yu,fallback:E.none()},{current:yu,next:Cu,fallback:E.some(o)},{current:Cu,next:Cu,fallback:E.some(yu)}],Tu=(t,r,o,n,e=xu)=>ce(e,e=>e.current===o).bind(e=>e.current(t,r,n,e.next).orThunk(()=>e.fallback.bind(e=>Tu(t,r,e,n)))),Su={left:()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>0<e.length?E.some(e[e.length-1]):E.none()}),right:()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>0<e.length?E.some(e[0]):E.none()})},Ru=(t,e,r,o,n,l)=>Tu(t,e,o,n).bind(e=>l(e.item)?E.none():r(e.item)?E.some(e.item):Ru(t,e.item,r,e.mode,n,l)),Du=t=>e=>0===t.property().children(e).length,Ou=(e,t,r,o)=>Ru(e,t,r,yu,Su.left(),o),ku=(e,t,r,o)=>Ru(e,t,r,yu,Su.right(),o),Eu=t(),Au=(Km=(e,t)=>{return r=Eu,e=e,t=t,Ou(r,e,Du(r),t);var r},Ym=(e,t)=>{return r=Eu,e=e,t=t,ku(r,e,Du(r),t);var r},(e,t,r)=>Ou(Eu,e,t,r)),zu=(e,t,r)=>ku(Eu,e,t,r),Nu=(e,t,r)=>fr(e,t,r).isSome(),Bu=fm([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),_u=e=>T(e,"tr"),ju={...Bu,verify:(r,t,e,o,n,l,a)=>T(o,"td,th",a).bind(e=>T(t,"td,th",a).map(t=>w(e,t)?w(o,e)&&Hl(e)===n?l(t):Bu.none("in same cell"):cs(_u,[e,t]).fold(()=>((e,t,r)=>{t=e.getRect(t),e=e.getRect(r);return e.right>t.left&&e.left<t.right})(r,t,e)?Bu.success():l(t),e=>l(t)))).getOr(Bu.none("default")),cata:(e,t,r,o,n)=>e.fold(t,r,o,n)},Lu=(e,t,r,o)=>({parent:e,children:t,element:r,index:o}),Wu=o=>gt(o).bind(t=>{let r=wt(t);return Mu(r,o).map(e=>Lu(t,r,o,e))}),Mu=(e,t)=>de(e,f(w,t)),Iu=v("br"),Pu=(e,t,r)=>t(e,r).bind(e=>Je(e)&&0===Il(e).trim().length?Pu(e,t,r):E.some(e)),Fu=(e,t,r)=>r.traverse(t).orThunk(()=>Pu(t,r.gather,e)).map(r.relative),Hu=(e,t)=>yt(e,t).filter(Iu).orThunk(()=>yt(e,t-1).filter(Iu)),Vu=(t,e,r,o)=>Hu(e,r).bind(e=>o.traverse(e).fold(()=>Pu(e,o.gather,t).map(o.relative),e=>Wu(e).map(e=>W.on(e.parent,e.index)))),qu=(e,t,r,o)=>(Iu(t)?Fu(e,t,o):Vu(e,t,r,o)).map(e=>({start:e,finish:e})),$u=e=>ju.cata(e,e=>E.none(),()=>E.none(),e=>E.some(Ws(e,0)),e=>E.some(Ws(e,Hl(e)))),Uu=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Gu=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Ku=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),Yu=(e,t,r)=>0<=r&&r<Hl(t)?e.getRangedRect(t,r,t,r+1):0<r?e.getRangedRect(t,r-1,t,r):E.none(),Ju=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Qu=(e,t)=>E.some(e.getRect(t)),Xu=(e,t,r)=>Ye(t)?Qu(e,t).map(Ju):Je(t)?Yu(e,t,r).map(Ju):E.none(),Zu=(e,t)=>Ye(t)?Qu(e,t).map(Ju):Je(t)?e.getRangedRect(t,0,t,Hl(t)).map(Ju):E.none(),ef=5,tf=fm([{none:[]},{retry:["caret"]}]),rf=(e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right,of=(t,e,r)=>gr(e,Im).fold(Z,e=>Zu(t,e).exists(e=>rf(r,e))),nf=(e={point:e=>e.top,adjuster:(e,t,r,o,n)=>{var l=Gu(n,ef);return Math.abs(r.top-o.top)<1||r.bottom<n.top?tf.retry(l):r.bottom===n.top?tf.retry(Gu(n,1)):of(e,t,n)?tf.retry(Ku(l,ef,0)):tf.none()},move:Gu,gather:Km},nc={point:e=>e.bottom,adjuster:(e,t,r,o,n)=>{var l=Uu(n,ef);return Math.abs(r.bottom-o.bottom)<1||r.top>n.bottom?tf.retry(l):r.top===n.bottom?tf.retry(Uu(n,1)):of(e,t,n)?tf.retry(Ku(l,ef,0)):tf.none()},move:Uu,gather:Ym},(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===z(e)).isSome()),lf=(e,t,r,o,n)=>af(e,t,r,t.move(o,ef),n),af=(r,o,n,l,a)=>0===a?E.some(l):nf(r,l.left,o.point(l))?lf(r,o,n,l,a-1):r.situsFromPoint(l.left,o.point(l)).bind(e=>e.start.fold(E.none,t=>Zu(r,t).bind(e=>o.adjuster(r,t,e,n,l).fold(E.none,e=>af(r,o,n,e,a-1))).orThunk(()=>E.some(l)),E.none)),sf={tryUp:f(lc=(t,r,e)=>{var o,n=t.move(e,ef);let l=af(r,t,e,n,100).getOr(n);return e=l,n=r,((o=t).point(e)>n.getInnerHeight()?E.some(o.point(e)-n.getInnerHeight()):o.point(e)<0?E.some(-o.point(e)):E.none()).fold(()=>r.situsFromPoint(l.left,t.point(l)),e=>(r.scrollBy(0,e),r.situsFromPoint(l.left,t.point(l)-e)))},e),tryDown:f(lc,nc),getJumpSize:g(ef)},mf=20,cf=(r,o,n)=>r.getSelection().bind(t=>qu(o,t.finish,t.foffset,n).fold(()=>E.some(Ws(t.finish,t.foffset)),e=>{e=r.fromSitus(e),e=ju.verify(r,t.finish,t.foffset,e.finish,e.foffset,n.failure,o);return $u(e)})),df=(r,o,n,l,a,s)=>0===s?E.none():gf(r,o,n,l,a).bind(e=>{var t=r.fromSitus(e),t=ju.verify(r,n,l,t.finish,t.foffset,a.failure,o);return ju.cata(t,()=>E.none(),()=>E.some(e),e=>w(n,e)&&0===l?uf(r,n,l,Gu,a):df(r,o,e,0,a,s-1),e=>w(n,e)&&l===Hl(e)?uf(r,n,l,Uu,a):df(r,o,e,Hl(e),a,s-1))}),uf=(t,e,r,o,n)=>Xu(t,e,r).bind(e=>ff(t,n,o(e,sf.getJumpSize()))),ff=(e,t,r)=>{var o=jo().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,r):E.none()},gf=(t,e,r,o,n)=>Xu(t,r,o).bind(e=>ff(t,n,e)),hf=(t,r,o)=>cf(t,r,o).bind(e=>df(t,r,e.element,e.offset,o,mf).map(t.fromSitus)),pf=(e,t)=>Nu(e,e=>gt(e).exists(e=>w(e,t))),vf=(t,o,n,e,l)=>T(e,"td,th",o).bind(r=>T(r,"table",o).bind(e=>pf(l,e)?hf(t,o,n).bind(t=>T(t.finish,"td,th",o).map(e=>({start:r,finish:e,range:t}))):E.none())),bf=(e,t,r,o,n,l)=>l(o,t).orThunk(()=>vf(e,t,r,o,n).map(e=>{e=e.range;return Jd.create(E.some(hu(e.start,e.soffset,e.finish,e.foffset)),!0)})),wf=(e,o)=>T(e,"tr",o).bind(r=>T(r,"table",o).bind(e=>{var t=cr(e,"tr");return w(r,t[0])?Au(e,e=>Kl(e).isSome(),o).map(e=>{var t=Hl(e);return Jd.create(E.some(hu(e,t,e,t)),!0)}):E.none()})),yf=(e,o)=>T(e,"tr",o).bind(r=>T(r,"table",o).bind(e=>{var t=cr(e,"tr");return w(r,t[t.length-1])?zu(e,e=>Gl(e).isSome(),o).map(e=>Jd.create(E.some(hu(e,0,e,0)),!0)):E.none()})),Cf=(e,t,r,o,n,l,a)=>vf(e,r,o,n,l).bind(e=>vu(t,r,e.start,e.finish,a)),xf=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Tf=e=>{let t=xf(E.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(E.some(e))}}},Sf=()=>{let t=Tf(O);return{...t,on:e=>t.get().each(e)}},Rf=(e,t)=>T(e,"td,th",t),Df=e=>ht(e).exists(za),Of=(s,i,t,m)=>{let r=Sf(),o=r.clear,n=a=>{r.on(e=>{m.clearBeforeUpdate(i),Rf(a.target,t).each(l=>{fs(e,l,t).each(e=>{var t,r,o,n=e.boxes.getOr([]);1===n.length?(t=n[0],r="false"===Na(t),o=yr(Aa(a.target),t,w),r&&o&&m.selectRange(i,n,t,t)):1<n.length&&(m.selectRange(i,n,e.start,e.finish),s.selectContents(l))})})})};return{clearstate:o,mousedown:e=>{m.clear(i),Rf(e.target,t).filter(Df).each(r.set)},mouseover:e=>{n(e)},mouseup:e=>{n(e),o()}}},kf={traverse:bt,gather:Ym,relative:W.before,retry:sf.tryDown,failure:ju.failedDown},Ef={traverse:vt,gather:Km,relative:W.before,retry:sf.tryUp,failure:ju.failedUp},Af=(Qm=t=>e=>e===t)(38),zf=Qm(40),Nf=e=>37<=e&&e<=40,Bf={isBackward:Qm(37),isForward:Qm(39)},_f={isBackward:Qm(39),isForward:Qm(37)},jf=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return vn(t,e)},Lf=(e,t,r)=>{r=(void 0!==r?r.dom:document).defaultView;r&&r.scrollBy(e,t)},Wf=fm([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Mf={domRange:Wf.domRange,relative:Wf.relative,exact:Wf.exact,exactFromRange:e=>Wf.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var e=e.match({domRange:e=>B.fromDom(e.startContainer),relative:(e,t)=>W.getStart(e),exact:(e,t,r,o)=>e});return e=e,B.fromDom(ft(e).dom.defaultView)},range:uu.create},If=(r,e,t)=>{var o;return E.from(null==(o=r.caretPositionFromPoint)?void 0:o.call(r,e,t)).bind(e=>{var t;return null===e.offsetNode?E.none():((t=r.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),E.some(t))})},Pf=(e,t,r)=>{var o;return E.from(null==(o=e.caretRangeFromPoint)?void 0:o.call(e,t,r))},Ff=(e,t,r)=>e.caretPositionFromPoint?If(e,t,r):e.caretRangeFromPoint?Pf(e,t,r):E.none(),Hf=(e,t,r)=>{e=e.document;return Ff(e,t,r).map(e=>uu.create(B.fromDom(e.startContainer),e.startOffset,B.fromDom(e.endContainer),e.endOffset))},Vf=(e,t)=>{var r=z(e);return"input"===r?W.after(e):i(["br","img"],r)?0===t?W.before(e):W.after(e):W.on(e,t)},qf=(e,t)=>{e=e.fold(W.before,Vf,W.after),t=t.fold(W.before,Vf,W.after);return Mf.relative(e,t)},$f=(e,t,r,o)=>{e=Vf(e,t),t=Vf(r,o);return Mf.relative(e,t)},Uf=(e,t,r,o)=>{var n=ut(e).dom.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,o),n},Gf=(e,t,r,o)=>{var n=Uf(e,t,r,o),e=w(e,r)&&t===o;return n.collapsed&&!e},Kf=e=>E.from(e.getSelection()),Yf=(e,t)=>{Kf(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},Jf=(e,t,r,o,n)=>{t=ou(e,t,r,o,n);Yf(e,t)},Qf=(e,t,r,o,n,l)=>{t.collapse(r.dom,o),t.extend(n.dom,l)},Xf=(l,e)=>cu(l,e).match({ltr:(e,t,r,o)=>{Jf(l,e,t,r,o)},rtl:(t,r,o,n)=>{Kf(l).each(e=>{if(e.setBaseAndExtent)e.setBaseAndExtent(t.dom,r,o.dom,n);else if(e.extend)try{Qf(l,e,t,r,o,n)}catch(e){Jf(l,o,n,t,r)}else Jf(l,o,n,t,r)})}}),Zf=(e,t,r,o,n)=>{t=$f(t,r,o,n);Xf(e,t)},eg=(e,t,r)=>{t=qf(t,r);Xf(e,t)},tg=e=>{var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),E.some(uu.create(B.fromDom(t.startContainer),t.startOffset,B.fromDom(e.endContainer),e.endOffset))):E.none()},rg=e=>{var t,r;return null!==e.anchorNode&&null!==e.focusNode&&(t=B.fromDom(e.anchorNode),r=B.fromDom(e.focusNode),Gf(t,e.anchorOffset,r,e.focusOffset))?E.some(uu.create(t,e.anchorOffset,r,e.focusOffset)):tg(e)},og=(e,t,r=!0)=>{r=(r?Xd:Qd)(e,t);Yf(e,r)},ng=e=>Kf(e).filter(e=>0<e.rangeCount).bind(rg),lg=e=>ng(e).map(e=>Mf.exact(e.start,e.soffset,e.finish,e.foffset)),ag=(e,t)=>{e=du(e,t);return lu(e)},sg=(e,t,r)=>Hf(e,t,r),ig=e=>{Kf(e).each(e=>e.removeAllRanges())},mg=l=>({elementFromPoint:(e,t)=>B.fromPoint(B.fromDom(l.document),e,t),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(e,t,r,o)=>{e=Mf.exact(e,t,r,o);return ag(l,e)},getSelection:()=>lg(l).map(e=>gu(l,e)),fromSitus:e=>{e=Mf.relative(e.start,e.finish);return gu(l,e)},situsFromPoint:(e,t)=>sg(l,e,t).map(e=>fu.create(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{ig(l)},collapseSelection:(n=!1)=>{lg(l).each(e=>e.fold(e=>e.collapse(n),(e,t)=>{e=n?e:t;eg(l,e,e)},(e,t,r,o)=>{e=n?e:r,r=n?t:o;Zf(l,e,r,e,r)}))},setSelection:e=>{Zf(l,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:(e,t)=>{eg(l,e,t)},selectNode:e=>{og(l,e,!1)},selectContents:e=>{og(l,e)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>jf(B.fromDom(l.document)).top,scrollBy:(e,t)=>{Lf(e,t,B.fromDom(l.document))}}),cg=(e,t)=>({rows:e,cols:t}),dg=(e,t,r,o)=>{e=mg(e),e=Of(e,t,r,o);return{clearstate:e.clearstate,mousedown:e.mousedown,mouseover:e.mouseover,mouseup:e.mouseup}},ug=e=>gr(e,Ke).exists(za),fg=(e,t)=>ug(e)||ug(t),gg=(e,i,m,c)=>{let d=mg(e),u=()=>(c.clear(i),E.none());return{keydown:(e,r,t,o,n,l)=>{e=e.raw;let a=e.which,s=!0===e.shiftKey;return gs(i,c.selectedSelector).fold(()=>(Nf(a)&&!s&&c.clearBeforeUpdate(i),Nf(a)&&s&&!fg(r,o)?E.none:zf(a)&&s?f(Cf,d,i,m,kf,o,r,c.selectRange):Af(a)&&s?f(Cf,d,i,m,Ef,o,r,c.selectRange):zf(a)?f(bf,d,m,kf,o,r,yf):Af(a)?f(bf,d,m,Ef,o,r,wf):E.none),t=>{var e=e=>()=>ye(e,e=>bu(e.rows,e.cols,i,t,c)).fold(()=>ps(i,c.firstSelectedSelector,c.lastSelectedSelector).map(e=>{var t=zf(a)||l.isForward(a)?W.after:W.before;return d.setRelativeSelection(W.on(e.first,0),t(e.table)),c.clear(i),Jd.create(E.none(),!0)}),e=>E.some(Jd.create(E.none(),!0)));return Nf(a)&&s&&!fg(r,o)?E.none:zf(a)&&s?e([cg(1,0)]):Af(a)&&s?e([cg(-1,0)]):l.isBackward(a)&&s?e([cg(0,-1),cg(-1,0)]):l.isForward(a)&&s?e([cg(0,1),cg(1,0)]):Nf(a)&&!s?u:E.none})()},keyup:(r,o,n,l,a)=>gs(i,c.selectedSelector).fold(()=>{var e=r.raw,t=e.which;return!0===e.shiftKey&&Nf(t)&&fg(o,l)?pu(i,m,o,n,l,a,c.selectRange):E.none()},E.none)}},hg=(e,o,t,n)=>{let l=mg(e);return(e,r)=>{n.clearBeforeUpdate(o),fs(e,r,t).each(e=>{var t=e.boxes.getOr([]);n.selectRange(o,t,e.start,e.finish),l.selectContents(r),l.collapseSelection()})}},pg=(e,t)=>{e=rt(e,t);return void 0===e||""===e?[]:e.split(" ")},vg=(e,t,r)=>{r=pg(e,t).concat([r]);return N(e,t,r.join(" ")),!0},bg=(e,t,r)=>{var o=d(pg(e,t),e=>e!==r);return 0<o.length?N(e,t,o.join(" ")):b(e,t),!1},wg=e=>void 0!==e.dom.classList,yg=e=>pg(e,"class"),Cg=(e,t)=>vg(e,"class",t),xg=(e,t)=>bg(e,"class",t),Tg=(e,t)=>{wg(e)?e.dom.classList.add(t):Cg(e,t)},Sg=e=>{0===(wg(e)?e.dom.classList:yg(e)).length&&b(e,"class")},Rg=(e,t)=>{wg(e)?e.dom.classList.remove(t):xg(e,t),Sg(e)},Dg=(e,t)=>wg(e)&&e.dom.classList.contains(t),Og=(t,e)=>{A(e,e=>{Rg(t,e)})},kg={byClass:n=>{t=n.selected;let l=e=>{Tg(e,t)};var t,r;r=[n.selected,n.lastSelected,n.firstSelected];let o=e=>{Og(e,r)},a=e=>{e=cr(e,n.selectedSelector);A(e,o)};return{clearBeforeUpdate:a,clear:a,selectRange:(e,t,r,o)=>{a(e),A(t,l),Tg(r,n.firstSelected),Tg(o,n.lastSelected)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:(n,l,t)=>{let r=e=>{b(e,n.selected),b(e,n.firstSelected),b(e,n.lastSelected)},a=e=>{N(e,n.selected,"1")},s=e=>{o(e),t()},o=e=>{e=cr(e,n.selectedSelector+`,${n.firstSelectedSelector},`+n.lastSelectedSelector);A(e,r)};return{clearBeforeUpdate:o,clear:s,selectRange:(e,t,r,o)=>{s(e),A(t,a),N(r,n.firstSelected,"1"),N(o,n.lastSelected,"1"),l(t,r,o)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}},Eg=(e,t,r,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return r(e.elements)}},Ag=()=>({tag:"none"}),zg=e=>({tag:"multiple",elements:e}),Ng=e=>({tag:"single",element:e}),Bg=(e,t,r)=>({get:()=>ws(e(),r).fold(()=>t().fold(Ag,Ng),zg)}),_g=(e,t)=>{e=e.slice(0,t[t.length-1].row+1),e=yi(e);return u(e,e=>{e=e.cells.slice(0,t[t.length-1].column+1);return h(e,e=>e.element)})},jg=(e,t)=>{e=e.slice(t[0].row+t[0].rowspan-1,e.length),e=yi(e);return u(e,e=>{e=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return h(e,e=>e.element)})},Lg=(e,t,r)=>{let o=j.fromTable(e);return Si(o,t).map(e=>{var t=wi(o,r,!1),t=_(t).rows;return{upOrLeftCells:_g(t,e),downOrRightCells:jg(t,e)}})},Wg=(e,t,r,o,n,l,a)=>({target:e,x:t,y:r,stop:o,prevent:n,kill:l,raw:a}),Mg=e=>{var t=B.fromDom(er(e).getOr(e.target)),r=()=>e.stopPropagation(),o=()=>e.preventDefault(),n=K(o,r);return Wg(t,e.clientX,e.clientY,r,o,n,e)},Ig=(t,r)=>e=>{t(e)&&r(Mg(e))},Pg=(e,t,r,o,n)=>{r=Ig(r,o);return e.dom.addEventListener(t,r,n),{unbind:f(Hg,e,t,r,n)}},Fg=(e,t,r,o)=>Pg(e,t,r,o,!1),Hg=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},Vg=k,qg=(e,t,r)=>Fg(e,t,Vg,r),$g=Mg,Ug=e=>!Dg(B.fromDom(e.target),"ephox-snooker-resizer-bar"),Gg=(d,u)=>{let e=Bg(()=>B.fromDom(d.getBody()),()=>As(La(d),_a(d)),Rs.selectedSelector);let f=kg.byAttr(Rs,(n,l,a)=>{R(l).each(e=>{var t=h(n,e=>e.dom),r=ga(d),r=la(O,B.fromDom(d.getDoc()),r),o=zs(d),e=Lg(e,{selection:o},r).map(e=>Te(e,e=>h(e,e=>e.dom))).getOrUndefined();Nc(d,t,l.dom,a.dom,e)})},()=>Bc(d));d.on("init",e=>{let r=d.getWin(),o=Ba(d);var t=_a(d);let n=dg(r,o,t,f),l=gg(r,o,t,f),a=hg(r,o,t,f),s=e=>!0===e.raw.shiftKey,i=(d.on("TableSelectorChange",e=>a(e.start,e.finish)),(e,t)=>{s(e)&&(t.kill&&e.kill(),t.selection.each(e=>{e=Mf.relative(e.start,e.finish),e=du(r,e);d.selection.setRng(e)}))});let m=e=>0===e.button,c=e=>void 0===e.buttons||0!=(1&e.buttons);t=(()=>{let n=xf(B.fromDom(o)),l=xf(0);return{touchEnd:e=>{var t,r,o=B.fromDom(e.target);(v("td")(o)||v("th")(o))&&(t=n.get(),r=l.get(),w(t,o))&&e.timeStamp-r<300&&(e.preventDefault(),a(o,o)),n.set(o),l.set(e.timeStamp)}}})();d.on("dragstart",e=>{n.clearstate()}),d.on("mousedown",e=>{m(e)&&Ug(e)&&n.mousedown($g(e))}),d.on("mouseover",e=>{c(e)&&Ug(e)&&n.mouseover($g(e))}),d.on("mouseup",e=>{m(e)&&Ug(e)&&n.mouseup($g(e))}),d.on("touchend",t.touchEnd),d.on("keyup",e=>{let t=$g(e);var r,o;t.raw.shiftKey&&Nf(t.raw.which)&&(e=d.selection.getRng(),r=B.fromDom(e.startContainer),o=B.fromDom(e.endContainer),l.keyup(t,r,e.startOffset,o,e.endOffset).each(e=>{i(t,e)}))}),d.on("keydown",e=>{let t=$g(e);u.hide();var e=d.selection.getRng(),r=B.fromDom(e.startContainer),o=B.fromDom(e.endContainer),n=cn(Bf,_f)(B.fromDom(d.selection.getStart()));l.keydown(t,r,e.startOffset,o,e.endOffset,n).each(e=>{i(t,e)}),u.show()}),d.on("NodeChange",()=>{var e=d.selection,t=B.fromDom(e.getStart()),e=B.fromDom(e.getEnd());cs(R,[t,e]).fold(()=>f.clear(o),O)})}),d.on("PreInit",()=>{d.serializer.addTempAttr(Rs.firstSelected),d.serializer.addTempAttr(Rs.lastSelected)});return{getSelectedCells:()=>Eg(e.get(),g([]),e=>h(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>f.clear(B.fromDom(e))}},Kg=e=>{let n=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:t=>{n=d(n,e=>e!==t)},trigger:(...r)=>{let o={};A(e,(e,t)=>{o[e]=r[t]}),A(n,e=>{e(o)})}}},Yg=e=>({registry:Te(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:Te(e,e=>e.trigger)}),Jg=(t,r)=>{let o=null,n=()=>{F(o)||(clearTimeout(o),o=null)};return{cancel:n,throttle:(...e)=>{n(),o=setTimeout(()=>{o=null,t.apply(null,e)},r)}}},Qg=e=>e.slice(0).sort(),Xg=(e,t)=>{throw new Error("All required keys ("+Qg(e).join(", ")+") were not specified. Specified keys were: "+Qg(t).join(", ")+".")},Zg=e=>{throw new Error("Unsupported keys for object: "+Qg(e).join(", "))},eh=(t,e)=>{if(!P(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");A(e,e=>{if(!M(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},th=(e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Qg(e).join(", ")+") were not.")},rh=e=>{let r=Qg(e);ce(r,(e,t)=>t<r.length-1&&e===r[t+1]).each(e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})},oh=(o,n,l)=>{if(0===n.length)throw new Error("You must specify at least one required field.");return eh("required",n),rh(n),t=>{let r=Ce(t);fe(n,e=>i(r,e))||Xg(n,r),o(n,r);var e=d(n,e=>!l.validate(t[e],e));return 0<e.length&&th(e,l.label),t}},nh=(t,e)=>{e=d(e,e=>!i(t,e));0<e.length&&Zg(e)},lh=(n=(oc=e=>{return t=nh,e=e,oh(t,e,{validate:U,label:"function"});var t})(["compare","extract","mutate","sink"]),oc(["element","start","stop","destroy"])),ah=oc(["forceDrop","drop","move","delayDrop"]),sh=()=>{let n=E.none();let l=Yg({move:Kg(["info"])});return{onEvent:(e,o)=>{o.extract(e).each(e=>{var t,r;t=o,r=e,e=n.map(e=>t.compare(e,r)),n=E.some(r),e.each(e=>{l.trigger.move(e)})})},reset:()=>{n=E.none()},events:l.registry}},ih=()=>{var e=Yg({move:Kg(["info"])});return{onEvent:O,reset:O,events:e.registry}},mh=()=>{let e=ih(),t=sh(),r=e;return{on:()=>{r.reset(),r=t},off:()=>{r.reset(),r=e},isOn:()=>r===t,onEvent:(e,t)=>{r.onEvent(e,t)},events:t.events}},ch=(t,r,e)=>{let o=!1,n=Yg({start:Kg([]),stop:Kg([])}),l=mh();var a=()=>{m.stop(),l.isOn()&&(l.off(),n.trigger.stop())};let s=Jg(a,200);l.events.move.bind(e=>{r.mutate(t,e.info)});var i=t=>(...e)=>{o&&t.apply(null,e)};let m=r.sink(ah({forceDrop:a,drop:i(a),move:i(e=>{s.cancel(),l.onEvent(e,r)}),delayDrop:i(s.throttle)}),e);return{element:m.element,go:e=>{m.start(e),l.on(),n.trigger.start()},on:()=>{o=!0},off:()=>{o=!1},isActive:()=>o,destroy:()=>{m.destroy()},events:n.registry}},dh=(rc=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}})("ephox-dragster").resolve;var uh=n({compare:(e,t)=>vn(t.left-e.left,t.top-e.top),extract:e=>E.some(vn(e.x,e.y)),sink:(e,t)=>{let r=(e=>{e={layerClass:dh("blocker"),...e};let t=B.fromTag("div");N(t,"role","presentation"),jr(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Tg(t,dh("blocker")),Tg(t,e.layerClass);return{element:g(t),destroy:()=>{C(t)}}})(t),o=qg(r.element(),"mousedown",e.forceDrop),n=qg(r.element(),"mouseup",e.drop),l=qg(r.element(),"mousemove",e.move),a=qg(r.element(),"mouseout",e.delayDrop);return lh({element:r.element,start:e=>{y(e,r.element())},stop:()=>{C(r.element())},destroy:()=>{r.destroy(),n.unbind(),l.unbind(),a.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let fh=(e,t={})=>{var r=null!=(r=t.mode)?r:uh;return ch(e,r,t)},gh=(Xm=rc("ephox-snooker").resolve,()=>{let r=Yg({drag:Kg(["xDelta","yDelta"])});return{mutate:(e,t)=>{r.trigger.drag(e,t)},events:r.registry}}),hh=()=>{let r=Yg({drag:Kg(["xDelta","yDelta","target"])}),o=E.none();var e=gh();e.events.drag.bind(t=>{o.each(e=>{r.trigger.drag(t.xDelta,t.yDelta,e)})});return{assign:e=>{o=E.some(e)},get:()=>o,mutate:e.mutate,events:r.registry}},ph=(e,t,r,o,n)=>{var l=B.fromTag("div");return jr(l,{position:"absolute",left:t-o/2+"px",top:r+"px",height:n+"px",width:o+"px"}),et(l,{"data-column":e,role:"presentation"}),l},vh=(e,t,r,o,n)=>{var l=B.fromTag("div");return jr(l,{position:"absolute",left:t+"px",top:r-n/2+"px",height:n+"px",width:o+"px"}),et(l,{"data-row":e,role:"presentation"}),l},bh=Xm("resizer-bar"),wh=Xm("resizer-rows"),yh=Xm("resizer-cols"),Ch=7,xh=(e,r)=>u(e.all,(e,t)=>r(e.element)?[t]:[]),Th=(r,o)=>{let t=[];return ne(r.grid.columns,e=>{j.getColumnAt(r,e).map(e=>e.element).forall(o)&&t.push(e)}),d(t,t=>{var e=j.filterItems(r,e=>e.column===t);return fe(e,e=>o(e.element))})},Sh=e=>{e=cr(e.parent(),"."+bh);A(e,C)},Rh=(t,e,r)=>{let o=t.origin();A(e,e=>{e.each(e=>{e=r(o,e);Tg(e,bh),y(t.parent(),e)})})},Dh=(e,t,r,o)=>{Rh(e,t,(e,t)=>{t=ph(t.col,t.x-e.left,r.top-e.top,Ch,o);return Tg(t,yh),t})},Oh=(e,t,r,o)=>{Rh(e,t,(e,t)=>{t=vh(t.row,r.left-e.left,t.y-e.top,o,Ch);return Tg(t,wh),t})},kh=(e,t,r,o,n)=>{var l=yn(r),a=t.isResizable,o=0<o.length?Nn.positions(o,r):[];let s=0<o.length?xh(e,a):[];o=d(o,(e,t)=>c(s,e=>t===e)),Oh(t,o,l,Fo(r)),o=0<n.length?_n.positions(n,r):[];let i=0<o.length?Th(e,a):[];n=d(o,(e,t)=>c(i,e=>t===e));Dh(t,n,l,gn(r))},Eh=(e,t)=>{var r,o,n;Sh(e),e.isResizable(t)&&(r=j.fromTable(t),o=sn(r),n=ln(r),kh(r,e,t,o,n))},Ah=(e,t)=>{e=cr(e.parent(),"."+bh);A(e,t)},zh=e=>{Ah(e,e=>{S(e,"display","none")})},Nh=e=>{Ah(e,e=>{S(e,"display","block")})},Bh=e=>Dg(e,wh),_h=e=>Dg(e,yh),jh=Xm("resizer-bar-dragging"),Lh=n=>{let r=hh(),o=fh(r,{}),l=E.none(),e=(e,t)=>E.from(rt(e,t)),a=(r.events.drag.bind(r=>{e(r.target,"data-row").each(e=>{var t=$r(r.target,"top");S(r.target,"top",t+r.yDelta+"px")}),e(r.target,"data-column").each(e=>{var t=$r(r.target,"left");S(r.target,"left",t+r.xDelta+"px")})}),(e,t)=>$r(e,t)-Fr(e,"data-initial-"+t,0)),t=(o.events.stop.bind(()=>{r.get().each(o=>{l.each(r=>{e(o,"data-row").each(e=>{var t=a(o,"top");b(o,"data-initial-top"),c.trigger.adjustHeight(r,t,parseInt(e,10))}),e(o,"data-column").each(e=>{var t=a(o,"left");b(o,"data-initial-left"),c.trigger.adjustWidth(r,t,parseInt(e,10))}),Eh(n,r)})})}),(e,t)=>{c.trigger.startAdjust(),r.assign(e),N(e,"data-initial-"+t,$r(e,t)),Tg(e,jh),S(e,"opacity","0.2"),o.go(n.parent())}),s=qg(n.parent(),"mousedown",e=>{Bh(e.target)&&t(e.target,"top"),_h(e.target)&&t(e.target,"left")}),i=e=>w(e,n.view()),m=qg(n.view(),"mouseover",e=>{var t;t=e.target,T(t,"table",i).filter(za).fold(()=>{rr(e.target)&&Sh(n)},e=>{o.isActive()&&(l=E.some(e),Eh(n,e))})});let c=Yg({adjustHeight:Kg(["table","delta","row"]),adjustWidth:Kg(["table","delta","column"]),startAdjust:Kg([])});return{destroy:()=>{s.unbind(),m.unbind(),o.destroy(),Sh(n)},refresh:e=>{Eh(n,e)},on:o.on,off:o.off,hideBars:f(zh,n),showBars:f(Nh,n),events:c.registry}},Wh={create:(e,n,l)=>{let o=Nn,a=_n;e=Lh(e);let s=Yg({beforeResize:Kg(["table","type"]),afterResize:Kg(["table","type"]),startDrag:Kg([])});return e.events.adjustHeight.bind(e=>{var t=e.table,r=(s.trigger.beforeResize(t,"row"),o.delta(e.delta,t));Rm(t,r,e.row),s.trigger.afterResize(t,"row")}),e.events.startAdjust.bind(e=>{s.trigger.startDrag()}),e.events.adjustWidth.bind(e=>{var t=e.table,r=(s.trigger.beforeResize(t,"col"),a.delta(e.delta,t)),o=l(t);Sm(t,r,e.column,n,o),s.trigger.afterResize(t,"col")}),{on:e.on,off:e.off,refreshBars:e.refresh,hideBars:e.hideBars,showBars:e.showBars,destroy:e.destroy,events:s.registry}}},Mh={only:(e,t)=>{var r=Qe(e)?(r=e,B.fromDom(ft(r).dom.documentElement)):e;return{parent:g(r),view:g(e),origin:g(vn(0,0)),isResizable:t}},detached:(e,t,r)=>({parent:g(t),view:g(e),origin:()=>yn(t),isResizable:r}),body:(e,t,r)=>({parent:g(t),view:g(e),origin:g(vn(0,0)),isResizable:r})},Ih=()=>{var e=B.fromTag("div");return jr(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),y(or(),e),e},Ph=(e,t)=>e.inline?Mh.body(B.fromDom(e.getBody()),Ih(),t):Mh.only(B.fromDom(e.getDoc()),t),Fh=(e,t)=>{e.inline&&C(t.parent())},Hh=e=>$(e)&&"TABLE"===e.nodeName,Vh="bar-",qh=e=>"false"!==rt(e,"data-mce-resize"),$h=e=>{var t=j.fromTable(e);j.hasColumns(t)||A(Xr(e),e=>{var t=Lr(e,"width");S(e,"width",t),b(e,"width")})},Uh=e=>Or(e,"corner-"),Gh=e=>Dr(e,"corner-"),Kh=s=>{let o=Sf(),r=Sf(),n=Sf(),i,m,c,d,u=e=>Mc(s,e),f=()=>(ba(s)?Js:Ys)(),l=(e,t,r,o)=>{var n,l,t=Gh(t),a=kr(t,"e"),t=Or(t,"n");""===m&&gd(e),""===d&&pd(e),r!==i&&""!==m?(S(e,"width",m),l=f(),n=u(e),a=ba(s)||a?(a=e,Qs(a).columns-1):0,Sm(e,r-i,a,l,n)):Fa(m)&&(a=r*parseFloat(m.replace("%",""))/i,S(e,"width",a+"%")),Ha(m)&&$h(e),o!==c&&""!==d&&(S(e,"height",d),n=t?0:(l=e,Qs(l).rows-1),Rm(e,o-c,n))},t=(s.on("init",()=>{var e,t=Ph(s,qh);n.set(t),ha(s)&&Sa(s)&&(e=f(),t=Wh.create(t,e,u),s.mode.isReadOnly()||t.on(),t.events.startDrag.bind(e=>{o.set(s.selection.getRng())}),t.events.beforeResize.bind(e=>{var t=e.table.dom;_c(s,t,Wa(t),Ma(t),Vh+e.type)}),t.events.afterResize.bind(e=>{var t=e.table,r=t.dom;ja(t),o.on(e=>{s.selection.setRng(e),s.focus()}),jc(s,r,Wa(r),Ma(r),Vh+e.type),s.undoManager.add()}),r.set(t))}),s.on("ObjectResizeStart",e=>{var t,r=e.target;Hh(r)&&!s.mode.isReadOnly()&&(t=B.fromDom(r),A(s.dom.select(".mce-clonedresizable"),e=>{s.dom.addClass(e,"mce-"+va(s)+"-columns")}),!dd(t)&&xa(s)?hd(t):!cd(t)&&Ca(s)&&gd(t),ud(t)&&Or(e.origin,Vh)&&gd(t),i=e.width,m=Ta(s)?"":Ia(s,r).getOr(""),c=e.height,d=Pa(s,r).getOr(""))}),s.on("ObjectResized",e=>{var t,r=e.target;Hh(r)&&(r=B.fromDom(r),t=e.origin,Uh(t)&&l(r,t,e.width,e.height),ja(r),zc(s,r.dom,Lc))}),()=>{r.on(e=>{e.on(),e.showBars()})}),a=()=>{r.on(e=>{e.off(),e.hideBars()})};s.on("DisabledStateChange",e=>{(e.state?a:t)()}),s.on("SwitchMode",()=>{(s.mode.isReadOnly()?a:t)()}),s.on("dragstart dragend",e=>{("dragstart"===e.type?a:t)()}),s.on("remove",()=>{r.on(e=>{e.destroy()}),n.on(e=>{Fh(s,e)})});return{refresh:t=>{r.on(e=>e.refreshBars(B.fromDom(t)))},hide:()=>{r.on(e=>e.hideBars())},show:()=>{r.on(e=>e.showBars())}}},Yh=e=>{fa(e);var t=Kh(e),r=Gg(e,t),t=Ic(e,t,r);return Kd(e,t),Yd(e,t),Ls(e,t),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}},Jh=e=>({table:Yh(e)});l.add("dom",Jh)})();