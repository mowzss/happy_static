((t,e)=>{"function"==typeof define&&define.amd?define([],function(){return e(t,t.document)}):"object"==typeof module&&module.exports?module.exports=e(t,t.document):t.TextToSpeech=e(t,t.document)})("undefined"!=typeof window?window:global,function(u,d){return"speechSynthesis"in u?(t.prototype.init=function(){var r=this,t=d.querySelectorAll("[data-speech]");Array.prototype.forEach.call(t,function(p){p.addEventListener("click",function(t){t.preventDefault();var e,n,a,o,t=p.getAttribute("data-speech"),i=d.getElementById(t);i?(o="",(o=("TEXTAREA"===(e=i.tagName)||"INPUT"===e&&("text"===i.type||"search"===i.type)?i.value:i.innerText).trim())?(e=parseFloat(p.getAttribute("data-rate"))||1,i=parseFloat(p.getAttribute("data-pitch"))||1,n=parseFloat(p.getAttribute("data-volume"))||1,a=p.getAttribute("data-lang")||"zh-CN",r.isSpeaking?(u.speechSynthesis.cancel(),r.isSpeaking=!1,r.updateButtonState(p,"play")):((o=new SpeechSynthesisUtterance(o)).lang=a,o.rate=e,o.pitch=i,o.volume=n,o.onstart=function(){r.isSpeaking=!0,r.updateButtonState(p,"stop")},o.onend=function(){r.isSpeaking=!1,r.updateButtonState(p,"play")},o.onerror=function(){r.isSpeaking=!1,r.updateButtonState(p,"play"),console.error("语音朗读出错")},u.speechSynthesis.speak(o))):alert("没有可朗读的文本内容。")):alert('未找到ID为 "'+t+'" 的元素')})})},t.prototype.updateButtonState=function(t,e){t.textContent="play"===e?t.getAttribute("data-play-text")||"朗读":t.getAttribute("data-stop-text")||"停止"},"function"==typeof define&&define.amd||("loading"===d.readyState?d.addEventListener("DOMContentLoaded",function(){new t}):new t),t):(console.warn("当前浏览器不支持 Web Speech API，语音功能不可用。"),null);function t(){this.isSpeaking=!1,this.utterance=null,this.init()}});