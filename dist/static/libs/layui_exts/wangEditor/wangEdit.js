layui.define(["jquery","toast","wangEditor"],function(e){layui.link(layui.cache.base+"wangEditor/wangEditor.css","wangEditorCss");var r=layui.wangEditor,d=layui.jquery,o=layui.toast,l={selector:"#editor",html:"<p><br></p>",height:400,placeholder:"Type here...",upload_url:"/index.php?s=/index/Upload/save",base64LimitSize:100,serverResponseSuccessCode:0,mode:"default",elem:null};e("wangEdit",{render:function(e){var a,t,i=Object.assign({},l,e);if(!d(i.elem).data("wangEditor"))return e=d('<div class="wangEditor"><div class="wangEditor-toolbar"></div><div class="wangEditor-editor"></div></div>'),d(i.elem).hide().data("wangEditor",e).after(e).parent(),t=(a=r).createEditor({selector:e.find(".wangEditor-editor").get(0),html:i.html,config:{height:i.height,placeholder:i.placeholder,MENU_CONF:{uploadImage:{fieldName:"file",base64LimitSize:i.base64LimitSize,server:i.upload_url,customInsert(e,a){e.code===i.serverResponseSuccessCode?(o.success({title:"上传成功",message:e.msg}),a(e.data.url,e.data.name)):o.error({title:"上传失败",message:e.msg})}}},onCreated(e){e.setHtml(d(i.elem).val())},onChange(e){d(i.elem).val(e.getHtml())}},mode:i.mode}),a.createToolbar({editor:t,selector:e.find(".wangEditor-toolbar").get(0),config:{}}),t}})});