(()=>{var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.Env");let u=e=>e.dispatch("ResizeEditor");var t=t=>e=>e.options.get(t);let c=t("min_height"),f=t("max_height"),p=t("autoresize_overflow_padding"),r=t("autoresize_bottom_margin"),y=e=>e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen(),v=(e,t)=>{e=e.getBody();e&&(e.style.overflowY=t?"":"hidden",t||(e.scrollTop=0))},S=(e,t,o,i)=>{t=parseInt(null!=(e=e.getStyle(t,o,i))?e:"",10);return isNaN(t)?0:t},C=e=>"setcontent"===(null==e?void 0:e.type.toLowerCase())&&(!0===e.selection||!0===e.paste),H=(o,i,s,n)=>{var r=o.dom,l=o.getDoc();if(l)if(y(o))v(o,!0);else{var l=l.documentElement,g=n?n():p(o),a=null!=(a=c(o))?a:o.getElement().offsetHeight;let e=a;var d=S(r,l,"margin-top",!0),h=S(r,l,"margin-bottom",!0);let t=l.offsetHeight+d+h+g;t<0&&(t=0);l=o.getContainer().offsetHeight-o.getContentAreaContainer().offsetHeight,d=(t+l>a&&(e=t+l),f(o)),h=(d&&e>d?(e=d,v(o,!0)):v(o,!1),i.get());h.set&&(o.dom.setStyles(o.getDoc().documentElement,{"min-height":0}),o.dom.setStyles(o.getBody(),{"min-height":"inherit"})),e===h.totalHeight||t-g===h.contentHeight&&h.set||(a=e-h.totalHeight,r.setStyle(o.getContainer(),"height",e+"px"),i.set({totalHeight:e,contentHeight:t,set:!0}),u(o),m.browser.isSafari()&&(m.os.isMacOS()||m.os.isiOS())&&(l=o.getWin()).scrollTo(l.pageXOffset,l.pageYOffset),o.hasFocus()&&C(s)&&o.selection.scrollIntoView(),(m.browser.isSafari()||m.browser.isChromium())&&a<0&&H(o,i,s,n))}};e.add("autoresize",e=>{var t,o,i;(e=>{e=e.options.register;e("autoresize_overflow_padding",{processor:"number",default:1}),e("autoresize_bottom_margin",{processor:"number",default:50})})(e),e.options.isSet("resize")||e.options.set("resize",!1),e.inline||(t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})({totalHeight:0,contentHeight:0,set:!1}),i=t,(o=e).addCommand("mceAutoResize",()=>{H(o,i)}),((i,s)=>{let n=()=>r(i);i.on("init",e=>{var t=p(i),o=i.dom;o.setStyles(i.getDoc().documentElement,{height:"auto"}),m.browser.isEdge()||m.browser.isIE()?o.setStyles(i.getBody(),{paddingLeft:t,paddingRight:t,"min-height":0}):o.setStyles(i.getBody(),{paddingLeft:t,paddingRight:t}),H(i,s,e,n)}),i.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",e=>{H(i,s,e,n)})})(e,t))})})();