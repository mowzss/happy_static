(()=>{var o,e=tinymce.util.Tools.resolve("tinymce.PluginManager");o="function";let n=e=>typeof e===o;var a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=o=>e=>e.options.get(o);let c=t("save_enablewhendirty"),r=t("save_onsavecallback"),l=t("save_oncancelcallback"),s=(e,o)=>{e.notificationManager.open({text:o,type:"error"})},d=e=>{var o,t=a.DOM.getParent(e.id,"form");c(e)&&!e.isDirty()||(e.save(),o=r(e),n(o)?(o.call(e,e),e.nodeChanged()):t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():s(e,"Error: Form submit field collision.")),e.nodeChanged()):s(e,"Error: No form element found."))},m=e=>{var o=i.trim(e.startContent),t=l(e);n(t)?t.call(e,e):e.resetContent(o)},u=t=>e=>{let o=()=>{e.setEnabled(!c(t)||t.isDirty())};return o(),t.on("NodeChange dirty",o),()=>t.off("NodeChange dirty",o)};e.add("save",e=>{var o,t;(e=>{e=e.options.register;e("save_enablewhendirty",{processor:"boolean",default:!0}),e("save_onsavecallback",{processor:"function"}),e("save_oncancelcallback",{processor:"function"})})(e),(o=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>o.execCommand("mceSave"),onSetup:u(o),shortcut:"Meta+S"}),o.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>o.execCommand("mceCancel"),onSetup:u(o)}),o.addShortcut("Meta+S","","mceSave"),(t=e).addCommand("mceSave",()=>{d(t)}),t.addCommand("mceCancel",()=>{m(t)})})})();