(()=>{var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let r=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g;var n,t,o=t=>e=>e.options.get(t);let u=o("autolink_pattern"),i=o("link_default_target"),g=o("link_default_protocol"),s=o("allow_unsafe_link_target"),a=(e,t,r)=>!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name,d=(n="string",e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&a(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===n;var t}),l=(t=void 0,e=>t===e),c=e=>null==e,f=e=>!c(e),m=t=>e=>!t(e),k=Object.hasOwnProperty,p=(e,t)=>k.call(e,t),y=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,v=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!l(n)||e+t.length<=n)},w=(e,t)=>y(e,t,0),h="\ufeff",_=e=>e===h,A=e=>e.replace(/\uFEFF/g,"");var C=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");let b=e=>3===e.nodeType,$=e=>1===e.nodeType,x=e=>/^[(\[{ \u00a0]$/.test(e),E=e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e),P=e=>/[?!,.;:]/.test(e),z=(t,r,n)=>{for(let e=r-1;0<=e;e--){var o=t.charAt(e);if(!_(o)&&n(o))return e}return-1},N=(e,t)=>{let r=e,n=t;for(;$(r)&&r.childNodes[n];)r=r.childNodes[n],n=(b(r)?r.data:r.childNodes).length;return{container:r,offset:n}},O=(t,n)=>{let e,r=t.schema.getVoidElements();var o=u(t);let{dom:a,selection:l}=t;if(null===a.getParent(l.getNode(),"a[href]")&&!t.mode.isReadOnly()){var i=l.getRng(),s=C(a,e=>a.isBlock(e)||p(r,e.nodeName.toLowerCase())||"false"===a.getContentEditable(e)),{container:i,offset:d}=N(i.endContainer,i.endOffset),c=null!=(e=a.getParent(i,a.isBlock))?e:a.getRoot(),i=s.backwards(i,d+n,(e,t)=>{e=e.data,t=z(e,t,m(x));return-1===t||P(e[t])?t:t+1},c);if(i){let r=i.container;d=s.backwards(i.container,i.offset,(e,t)=>{r=e;e=z(e.data,t,x);return-1===e?e:e+1},c),n=a.createRng();d?n.setStart(d.container,d.offset):n.setStart(r,0),n.setEnd(i.container,i.offset);s=A(n.toString()).match(o);if(s){let e=s[0];return w(e,"www.")?(c=g(t),e=c+"://"+e):v(e,"@")&&!E(e)&&(e="mailto:"+e),{rng:n,url:e}}}}return null},R=(e,t)=>{var{dom:r,selection:n}=e,{rng:t,url:o}=t,a=n.getBookmark(),t=(n.setRng(t),"createlink"),l={command:t,ui:!1,value:o};e.dispatch("BeforeExecCommand",l).isDefaultPrevented()||(e.getDoc().execCommand(t,!1,o),e.dispatch("ExecCommand",l),t=i(e),d(t)&&(o=n.getNode(),r.setAttrib(o,"target",t),"_blank"!==t||s(e)||r.setAttrib(o,"rel","noopener"))),n.moveToBookmark(a),e.nodeChanged()},T=e=>{var t=O(e,-1);f(t)&&R(e,t)},Z=T,B=e=>{var t=O(e,0);f(t)&&R(e,t)};e.add("autolink",e=>{var t;(e=>{e=e.options.register;e("autolink_pattern",{processor:"regexp",default:new RegExp("^"+r().source+"$","i")}),e("link_default_target",{processor:"string"}),e("link_default_protocol",{processor:"string",default:"https"})})(e),(t=e).on("keydown",e=>{13!==e.keyCode||e.isDefaultPrevented()||B(t)}),t.on("keyup",e=>{32===e.keyCode?T(t):(48===e.keyCode&&e.shiftKey||221===e.keyCode)&&Z(t)})})})();