var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],r=0,u=a.length;r<u;r++,i++)o[i]=a[r];return o};function rangePlugin(t){return void 0===t&&(t={}),function(n){var o,i,a,r="",e={onParseConfig:function(){n.config.mode="range",r=n.config.altInput?n.config.altFormat:n.config.dateFormat},onReady:function(){(()=>{if(t.input){if(!(o=t.input instanceof Element?t.input:window.document.querySelector(t.input)))return n.config.errorHandler(new Error("Invalid input element specified"));n.config.wrap&&(o=o.querySelector("[data-input]"))}else(o=n._input.cloneNode()).removeAttribute("id"),o._flatpickr=void 0;var e;o.value&&(e=n.parseDate(o.value))&&n.selectedDates.push(e),o.setAttribute("data-fp-omit",""),n.config.clickOpens&&(n._bind(o,["focus","click"],function(){n.selectedDates[1]&&(n.latestSelectedDateObj=n.selectedDates[1],n._setHoursFromDate(n.selectedDates[1]),n.jumpToDate(n.selectedDates[1])),i=!0,n.isOpen=!1,n.open(void 0,"left"===t.position?n._input:o)}),n._bind(n._input,["focus","click"],function(e){e.preventDefault(),n.isOpen=!1,n.open()})),n.config.allowInput&&n._bind(o,"keydown",function(e){"Enter"===e.key&&(n.setDate([n.selectedDates[0],o.value],!0,r),o.click())}),t.input||n._input.parentNode&&n._input.parentNode.insertBefore(o,n._input.nextSibling)})(),n.config.ignoredFocusElements.push(o),n.config.allowInput?(n._input.removeAttribute("readonly"),o.removeAttribute("readonly")):o.setAttribute("readonly","readonly"),n._bind(n._input,"focus",function(){n.latestSelectedDateObj=n.selectedDates[0],n._setHoursFromDate(n.selectedDates[0]),i=!1,n.jumpToDate(n.selectedDates[0])}),n.config.allowInput&&n._bind(n._input,"keydown",function(e){"Enter"===e.key&&n.setDate([n._input.value,n.selectedDates[1]],!0,r)}),n.setDate(n.selectedDates,!1),e.onValueUpdate(n.selectedDates),n.loadedPlugins.push("range")},onPreCalendarPosition:function(){i&&(n._positionElement=o,setTimeout(function(){n._positionElement=n._input},0))},onChange:function(){n.selectedDates.length||setTimeout(function(){n.selectedDates.length||(o.value="",a=[])},10),i&&setTimeout(function(){o.focus()},0)},onDestroy:function(){t.input||o.parentNode&&o.parentNode.removeChild(o)},onValueUpdate:function(e){var t;o&&((a=!a||e.length>=a.length?__spreadArrays(e):a).length>e.length&&(e=e[0],(e=i?[a[0],e]:[e,a[1]])[0].getTime()>e[1].getTime()&&(i?e[0]=e[1]:e[1]=e[0]),n.setDate(e,!1),a=__spreadArrays(e)),t=(e=n.selectedDates.map(function(e){return n.formatDate(e,r)}))[0],n._input.value=void 0===t?"":t,o.value=void 0===(t=e[1])?"":t)}};return e}}export default rangePlugin;