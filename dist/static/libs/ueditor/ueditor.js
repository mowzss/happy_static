layui.define(["jquery","UECONFING","UE"],function(e){var o=layui.jquery,r=layui.UE,t=layui.cache.modules.ueditor,t=t.substring(0,t.lastIndexOf("/")),a={uploadUrl:"/index.php?s=/index/Upload/ueditor",uploadServiceEnable:!0,uploadServiceUpload:function(e,t,r,a){var n=new FormData;n.append("file",t),o.ajax({url:"/index.php?s=/index/Upload/save",type:"POST",data:n,processData:!1,contentType:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.upload&&r.progress&&e.upload.addEventListener("progress",function(e){e.lengthComputable&&r.progress(Math.round(e.loaded/e.total*100))},!1),e},success:function(e){var t=r;try{var a,n="string"==typeof e?JSON.parse(e):e;0===n.code?(a={state:"SUCCESS",url:n.data.url,title:n.data.name,original:n.data.name,type:n.data.ext,size:n.data.size},t.success(a)):d(t,n.msg||"上传失败")}catch(e){d(t,"服务器响应解析失败")}},error:function(e,t,a){d(r,"网络错误或服务器错误: "+t+" - "+a)}})}},i={UEDITOR_HOME_URL:t+"/",UEDITOR_CORS_URL:t+"/",serverUrl:a.uploadUrl,initialFrameHeight:500,autoHeightEnabled:!1,uploadServiceEnable:a.uploadServiceEnable,uploadServiceUpload:a.uploadServiceUpload,tipError:function(e,t){window&&window.MS&&window.MS.dialog?window.MS.dialog.tipError(e):alert(e)}};function d(e,t){e.error({msg:t})}e("ueditor",{render:function(e,t){var t=o.extend({},i,t),a=o(e),e=a.attr("id"),n=(r.delEditor(e),r.getEditor(e,t));n.ready(function(){n.setContent(a.val()),n.addListener("contentChange",function(){a.val(n.getContent())}),a.on("input",function(){n.setContent(this.value)})})}})});