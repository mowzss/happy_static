{extend name="./layout" /} {block name="content"}<div class="layui-card izshi-shadow"><div class="layui-card-header"> <span>修改资料</span></div><div class="layui-card-body"><form class="layui-form layui-form-pane" action="{:url()}" data-auto="true" method="post"><div class="layui-form-item"> <label class="layui-form-label">UID</label><div class="layui-input-block"> <input type="text" class="layui-input" value="{$userdb.id|default=''}" disabled></div><div class="layui-form-mid layui-word-aux">不可修改</div></div><div class="layui-form-item"> <label class="layui-form-label">账号</label><div class="layui-input-block"> <input type="text" class="layui-input" value="{$userdb.username|default=''}" disabled></div><div class="layui-form-mid layui-word-aux">不可修改</div></div><div class="layui-form-item"> <label class="layui-form-label">昵称</label><div class="layui-input-block"> <input type="text" name="nickname" required lay-verify="required" placeholder="请输入昵称" autocomplete="off" class="layui-input" value="{$userdb.nickname|default=''}"></div><div class="layui-form-mid layui-word-aux">请输入2-8中文字符</div></div><div class="layui-form-item"> <label class="layui-form-label">头像</label><div class="layui-input-block"><div class="layui-upload"> <input type="hidden" name="headimg" value="{$userdb.headimg|default=''}" data-max-width="500" data-max-height="500"> <button type="button" data-title="上传图片" data-file="btn" data-type="jpg,png,jpeg" data-field="headimg" data-cut-width="100" data-cut-height="100" class="layui-btn layui-btn-primary"> <i class="layui-icon">&#xe67c;</i>上传图片</button><div class="layui-upload-list"> <img src="{$userdb.headimg|default='__FULL__/static/theme/img/image.png'}" class="layui-upload-img" id="headimg" data-tips-image></div></div></div></div><div class="layui-form-item"> <label class="layui-form-label">性别</label><div class="layui-input-block"> {foreach [1=>'男',2=>'女'] as $k=>$v } {if $userdb.sex eq $k} <input checked type="radio" name="sex" value="{$k}" title="{$v}"> {else} <input type="radio" name="sex" value="{$k}" title="{$v}"> {/if} {/foreach}</div></div><div class="layui-form-item"> <label class="layui-form-label">生日</label><div class="layui-input-block"> <input type="text" name="birthday" data-date-input placeholder="请选择生日" autocomplete="off" class="layui-input" value="{$userdb.birthday|default=''}"></div></div><div class="layui-form-item layui-form-text"> <label class="layui-form-label">签名/简介</label><div class="layui-input-block"> <textarea name="describe" placeholder="请输入内容" class="layui-textarea">{$userdb.describe|default=""}</textarea></div></div><div class="layui-form-item"><div class="layui-input-block"> <button class="layui-btn" type="submit">立即提交</button> <button type="reset" class="layui-btn layui-btn-primary">重置</button></div></div></form></div></div> {/block} {block name="footer_js"}<script>
    layui.form.render();
    $('[name="headimg"]').on('change', function (value) {
        value = this.value;
        $('#headimg').attr('src', value)
    });
</script> {/block}